var __extends=this&&this.__extends||function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __awaiter=this&&this.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function o(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n["throw"](e))}catch(t){a(t)}}function c(e){e.done?r(e.value):i(e.value).then(o,s)}c((n=n.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(a=o[0]&2?i["return"]:o[0]?i["throw"]||((a=i["return"])&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;if(i=0,a)o=[o[0]&2,a.value];switch(o[0]){case 0:case 1:a=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;i=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(o[0]===6&&r.label<a[1]){r.label=a[1];a=o;break}if(a&&r.label<a[2]){r.label=a[2];r.ops.push(o);break}if(a[2])r.ops.pop();r.trys.pop();continue}o=t.call(e,r)}catch(s){o=[6,s];i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};var __spreadArrays=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n};System.register([],(function(e,t){"use strict";return{execute:function(){var r=this;var n={allRenderFn:true,cmpDidLoad:true,cmpShouldUpdate:false,cmpDidUnload:false,cmpDidUpdate:false,cmpDidRender:false,cmpWillLoad:false,cmpWillUpdate:false,cmpWillRender:false,connectedCallback:false,disconnectedCallback:false,element:false,event:true,hasRenderFn:true,lifecycle:true,asyncLoading:true,hostListener:false,hostListenerTargetWindow:false,hostListenerTargetDocument:false,hostListenerTargetBody:false,hostListenerTargetParent:false,hostListenerTarget:false,member:true,method:true,mode:false,noVdomRender:false,observeAttribute:true,prop:true,propBoolean:true,propNumber:true,propString:true,propMutable:false,reflect:true,scoped:false,shadowDom:false,slot:true,slotRelocation:true,state:true,style:true,svg:false,updatable:true,vdomAttribute:true,vdomXlink:false,vdomClass:false,vdomFunctional:false,vdomKey:false,vdomListener:true,vdomRef:false,vdomRender:true,vdomStyle:false,vdomText:false,watchCallback:true,taskQueue:true,lazyLoad:true,hydrateServerSide:false,cssVarShim:true,initializeNextTick:true,hydrateClientSide:false,isDebug:false,isDev:false,devTools:false,lifecycleDOMEvents:false,profile:false,hotModuleReplacement:false,constructableCSS:true,cssAnnotations:true};var i="app";var a=0;var o=false;var s;var c;var f;var d=false;var p=false;var u=false;var l=false;var v=window;var m=document;var h={$flags$:0,$resourcesUrl$:"",jmp:function(e){return e()},raf:function(e){return requestAnimationFrame(e)},ael:function(e,t,r,n){return e.addEventListener(t,r,n)},rel:function(e,t,r,n){return e.removeEventListener(t,r,n)}};var g=false;var y=function(){try{new CSSStyleSheet;return true}catch(e){}return false}();var C=new WeakMap;var T=function(e){return C.get(e)};var S=e("r",(function(e,t){return C.set(t.$lazyInstance$=e,t)}));var R=function(e){var t={$flags$:0,$hostElement$:e,$instanceValues$:new Map};{t.$onInstancePromise$=new Promise((function(e){return t.$onInstanceResolve$=e}))}{t.$onReadyPromise$=new Promise((function(e){return t.$onReadyResolve$=e}));e["s-p"]=[];e["s-rc"]=[]}return C.set(e,t)};var P=function(e,t){return t in e};var $=function(e){return console.error(e)};var b=new Map;var E=function(e,r,n){var i=e.$tagName$.replace(/-/g,"_");var a=e.$lazyBundleIds$;var o=b.get(a);if(o){return o[i]}return t.import("./"+a+".entry.js"+"").then((function(e){{b.set(a,e)}return e[i]}),$)};var _=new Map;var w=[];var k=[];var x=[];var D=function(e,t){return function(r){e.push(r);if(!o){o=true;if(t&&h.$flags$&4){L(O)}else{h.raf(O)}}}};var I=function(e){for(var t=0;t<e.length;t++){try{e[t](performance.now())}catch(r){$(r)}}e.length=0};var M=function(e,t){var r=0;var n=0;while(r<e.length&&(n=performance.now())<t){try{e[r++](n)}catch(i){$(i)}}if(r===e.length){e.length=0}else if(r!==0){e.splice(0,r)}};var O=function(){a++;I(w);var e=(h.$flags$&6)===2?performance.now()+10*Math.ceil(a*(1/22)):Infinity;M(k,e);M(x,e);if(k.length>0){x.push.apply(x,k);k.length=0}if(o=w.length+k.length+x.length>0){h.raf(O)}else{a=0}};var L=function(e){return Promise.resolve().then(e)};var j=D(k,true);var N={};var A=function(e){e=typeof e;return e==="object"||e==="function"};var U=function(e){return"__sc_import_"+e.replace(/\s|-/g,"_")};var F=function(e,t){if(t===void 0){t=""}{return function(){return}}};var G=function(e,t){{return function(){return}}};var z=e("a",(function(){if(!(v.CSS&&v.CSS.supports&&v.CSS.supports("color","var(--c)"))){return t.import("./p-a614138e.system.js").then((function(){h.$cssShim$=v.__stencil_cssshim;if(h.$cssShim$){return h.$cssShim$.initShim()}}))}return Promise.resolve()}));var B=e("p",(function(){return __awaiter(r,void 0,void 0,(function(){var e,r,n,a,o;return __generator(this,(function(s){switch(s.label){case 0:{h.$cssShim$=v.__stencil_cssshim}e=t.meta.url;r=new RegExp("/"+i+"(\\.esm)?\\.js($|\\?|#)");n=Array.from(m.querySelectorAll("script")).find((function(e){return r.test(e.src)||e.getAttribute("data-stencil-namespace")===i}));a=n["data-opts"];if(!(e!==""))return[3,1];return[2,Object.assign(Object.assign({},a),{resourcesUrl:new URL(".",e).href})];case 1:o=new URL(".",new URL(n.getAttribute("data-resources-url")||n.src,v.location.href));V(o.href);if(!!window.customElements)return[3,3];return[4,t.import("./p-5b416380.system.js")];case 2:s.sent();s.label=3;case 3:return[2,Object.assign(Object.assign({},a),{resourcesUrl:o.href})]}}))}))}));var V=function(e){var t=U(i);try{v[t]=new Function("w","return import(w);//"+Math.random())}catch(n){var r=new Map;v[t]=function(n){var i=new URL(n,e).href;var a=r.get(i);if(!a){var o=m.createElement("script");o.type="module";o.src=URL.createObjectURL(new Blob(["import * as m from '"+i+"'; window."+t+".m = m;"],{type:"application/javascript"}));a=new Promise((function(e){o.onload=function(){e(v[t].m);o.remove()}}));r.set(i,a);m.head.appendChild(o)}return a}}};var J=function(e,t){if(e!=null&&!A(e)){if(t&4){return e==="false"?false:e===""||!!e}if(t&2){return parseFloat(e)}if(t&1){return String(e)}return e}return e};var W="hydrated";var H=new WeakMap;var q=function(e,t,r){var n=_.get(e);if(y&&r){n=n||new CSSStyleSheet;n.replace(t)}else{n=t}_.set(e,n)};var K=function(e,t,r,n){var i=X(t.$tagName$);var a=_.get(i);e=e.nodeType===11?e:m;if(a){if(typeof a==="string"){e=e.head||e;var o=H.get(e);var s=void 0;if(!o){H.set(e,o=new Set)}if(!o.has(i)){{if(h.$cssShim$){s=h.$cssShim$.createHostStyle(n,i,a,!!(t.$flags$&10));var c=s["s-sc"];if(c){i=c;o=null}}else{s=m.createElement("style");s.innerHTML=a}e.insertBefore(s,e.querySelector("link"))}if(o){o.add(i)}}}else if(!e.adoptedStyleSheets.includes(a)){e.adoptedStyleSheets=__spreadArrays(e.adoptedStyleSheets,[a])}}return i};var Q=function(e,t,r){var n=F("attachStyles",t.$tagName$);var i=K(e.getRootNode(),t,r,e);n()};var X=function(e,t){return"sc-"+e};var Y=e("h",(function(e,t){var r=[];for(var n=2;n<arguments.length;n++){r[n-2]=arguments[n]}var i=null;var a=null;var o=false;var s=false;var c=[];var f=function(t){for(var r=0;r<t.length;r++){i=t[r];if(Array.isArray(i)){f(i)}else if(i!=null&&typeof i!=="boolean"){if(o=typeof e!=="function"&&!A(i)){i=String(i)}if(o&&s){c[c.length-1].$text$+=i}else{c.push(o?Z(null,i):i)}s=o}}};f(r);if(t){if(t.name){a=t.name}}var d=Z(e,null);d.$attrs$=t;if(c.length>0){d.$children$=c}{d.$name$=a}return d}));var Z=function(e,t){var r={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};{r.$attrs$=null}{r.$name$=null}return r};var ee=e("H",{});var te=function(e){return e&&e.$tag$===ee};var re=function(e,t,r,n,i,a){if(r===n){return}var o=P(e,t);var s=t.toLowerCase();if(!o&&t[0]==="o"&&t[1]==="n"){if(t[2]==="-"){t=t.slice(3)}else if(P(v,s)){t=s.slice(2)}else{t=s[2]+t.slice(3)}if(r){h.rel(e,t,r,false)}if(n){h.ael(e,t,n,false)}}else{var c=A(n);if((o||c&&n!==null)&&!i){try{if(!e.tagName.includes("-")){var f=n==null?"":n;if(t==="list"){o=false}else if(r==null||e[t]!=f){e[t]=f}}else{e[t]=n}}catch(d){}}if(n==null||n===false){{e.removeAttribute(t)}}else if((!o||a&4||i)&&!c){n=n===true?"":n;{e.setAttribute(t,n)}}}};var ne=function(e,t,r,n){var i=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$;var a=e&&e.$attrs$||N;var o=t.$attrs$||N;{for(n in a){if(!(n in o)){re(i,n,a[n],undefined,r,t.$flags$)}}}for(n in o){re(i,n,a[n],o[n],r,t.$flags$)}};var ie=function(e,t,r,n){var i=t.$children$[r];var a=0;var o;var p;var v;if(!d){u=true;if(i.$tag$==="slot"){if(s){n.classList.add(s+"-s")}i.$flags$|=i.$children$?2:1}}if(i.$flags$&1){o=i.$elm$=m.createTextNode("")}else{o=i.$elm$=m.createElement(i.$flags$&2?"slot-fb":i.$tag$);{ne(null,i,l)}if(i.$children$){for(a=0;a<i.$children$.length;++a){p=ie(e,i,a,o);if(p){o.appendChild(p)}}}}{o["s-hn"]=f;if(i.$flags$&(2|1)){o["s-sr"]=true;o["s-cr"]=c;o["s-sn"]=i.$name$||"";v=e&&e.$children$&&e.$children$[r];if(v&&v.$tag$===i.$tag$&&e.$elm$){ae(e.$elm$,false)}}}return o};var ae=function(e,t){h.$flags$|=1;var r=e.childNodes;for(var n=r.length-1;n>=0;n--){var i=r[n];if(i["s-hn"]!==f&&i["s-ol"]){pe(i).insertBefore(i,de(i));i["s-ol"].remove();i["s-ol"]=undefined;u=true}if(t){ae(i,t)}}h.$flags$&=~1};var oe=function(e,t,r,n,i,a){var o=e["s-cr"]&&e["s-cr"].parentNode||e;var s;for(;i<=a;++i){if(n[i]){s=ie(null,r,i,e);if(s){n[i].$elm$=s;o.insertBefore(s,de(t))}}}};var se=function(e,t,r,n,i){for(;t<=r;++t){if(n=e[t]){i=n.$elm$;{p=true;if(i["s-ol"]){i["s-ol"].remove()}else{ae(i,true)}}i.remove()}}};var ce=function(e,t,r,n){var i=0;var a=0;var o=t.length-1;var s=t[0];var c=t[o];var f=n.length-1;var d=n[0];var p=n[f];var u;while(i<=o&&a<=f){if(s==null){s=t[++i]}else if(c==null){c=t[--o]}else if(d==null){d=n[++a]}else if(p==null){p=n[--f]}else if(fe(s,d)){ue(s,d);s=t[++i];d=n[++a]}else if(fe(c,p)){ue(c,p);c=t[--o];p=n[--f]}else if(fe(s,p)){if(s.$tag$==="slot"||p.$tag$==="slot"){ae(s.$elm$.parentNode,false)}ue(s,p);e.insertBefore(s.$elm$,c.$elm$.nextSibling);s=t[++i];p=n[--f]}else if(fe(c,d)){if(s.$tag$==="slot"||p.$tag$==="slot"){ae(c.$elm$.parentNode,false)}ue(c,d);e.insertBefore(c.$elm$,s.$elm$);c=t[--o];d=n[++a]}else{{u=ie(t&&t[a],r,a,e);d=n[++a]}if(u){{pe(s.$elm$).insertBefore(u,de(s.$elm$))}}}}if(i>o){oe(e,n[f+1]==null?null:n[f+1].$elm$,r,n,a,f)}else if(a>f){se(t,i,o)}};var fe=function(e,t){if(e.$tag$===t.$tag$){if(e.$tag$==="slot"){return e.$name$===t.$name$}return true}return false};var de=function(e){return e&&e["s-ol"]||e};var pe=function(e){return(e["s-ol"]?e["s-ol"]:e).parentNode};var ue=function(e,t){var r=t.$elm$=e.$elm$;var n=e.$children$;var i=t.$children$;{{if(t.$tag$==="slot");else{ne(e,t,l)}}if(n!==null&&i!==null){ce(r,n,t,i)}else if(i!==null){oe(r,null,t,i,0,i.length-1)}else if(n!==null){se(n,0,n.length-1)}}};var le=function(e){var t=e.childNodes;var r;var n;var i;var a;var o;var s;for(n=0,i=t.length;n<i;n++){r=t[n];if(r.nodeType===1){if(r["s-sr"]){o=r["s-sn"];r.hidden=false;for(a=0;a<i;a++){if(t[a]["s-hn"]!==r["s-hn"]){s=t[a].nodeType;if(o!==""){if(s===1&&o===t[a].getAttribute("slot")){r.hidden=true;break}}else{if(s===1||s===3&&t[a].textContent.trim()!==""){r.hidden=true;break}}}}}le(r)}}};var ve=[];var me=function(e){var t=e.childNodes;var r=t.length;var n=0;var i=0;var a=0;var o;var s;var c;var f;for(r=t.length;n<r;n++){o=t[n];if(o["s-sr"]&&(s=o["s-cr"])){c=s.parentNode.childNodes;f=o["s-sn"];for(i=c.length-1;i>=0;i--){s=c[i];if(!s["s-cn"]&&!s["s-nr"]&&s["s-hn"]!==o["s-hn"]){a=s.nodeType;if((a===3||a===8)&&f===""||a===1&&s.getAttribute("slot")===null&&f===""||a===1&&s.getAttribute("slot")===f){if(!ve.some((function(e){return e.$nodeToRelocate$===s}))){p=true;s["s-sn"]=f;ve.push({$slotRefNode$:o,$nodeToRelocate$:s})}}}}}if(o.nodeType===1){me(o)}}};var he=function(e,t,r,n){f=e.tagName;var i=t.$vnode$||Z(null,null);var a=te(n)?n:Y(null,null,n);if(r.$attrsToReflect$){a.$attrs$=a.$attrs$||{};r.$attrsToReflect$.forEach((function(t){var r=t[0],n=t[1];return a.$attrs$[n]=e[r]}))}a.$tag$=null;a.$flags$|=4;t.$vnode$=a;a.$elm$=i.$elm$=e;{c=e["s-cr"];d=g;u=p=false}ue(i,a);{if(u){me(a.$elm$);for(var o=0;o<ve.length;o++){var s=ve[o];if(!s.$nodeToRelocate$["s-ol"]){var l=m.createTextNode("");l["s-nr"]=s.$nodeToRelocate$;s.$nodeToRelocate$.parentNode.insertBefore(s.$nodeToRelocate$["s-ol"]=l,s.$nodeToRelocate$)}}h.$flags$|=1;for(var o=0;o<ve.length;o++){var s=ve[o];var v=s.$slotRefNode$.parentNode;var y=s.$slotRefNode$.nextSibling;var l=s.$nodeToRelocate$["s-ol"];while(l=l.previousSibling){var C=l["s-nr"];if(C&&C["s-sn"]===s.$nodeToRelocate$["s-sn"]&&v===C.parentNode){C=C.nextSibling;if(!C||!C["s-nr"]){y=C;break}}}if(!y&&v!==s.$nodeToRelocate$.parentNode||s.$nodeToRelocate$.nextSibling!==y){if(s.$nodeToRelocate$!==y){v.insertBefore(s.$nodeToRelocate$,y)}}}h.$flags$&=~1}if(p){le(a.$elm$)}ve.length=0}};var ge=function(e,t){if(t&&!e.$onRenderResolve$){t["s-p"].push(new Promise((function(t){return e.$onRenderResolve$=t})))}};var ye=function(e,t,r,n){{t.$flags$|=16}if(t.$flags$&4){t.$flags$|=512;return}var i=F("scheduleUpdate",r.$tagName$);var a=t.$ancestorComponent$;var o=t.$lazyInstance$;var s=function(){return Ce(e,t,r,o,n)};ge(t,a);var c;i();return $e(c,(function(){return j(s)}))};var Ce=function(e,t,r,n,i){var a=F("update",r.$tagName$);var o=e["s-rc"];if(i){Q(e,r,t.$modeName$)}var s=F("render",r.$tagName$);{{try{he(e,t,r,n.render())}catch(d){$(d)}}}if(h.$cssShim$){h.$cssShim$.updateHost(e)}{t.$flags$&=~16}{t.$flags$|=2}if(o){o.forEach((function(e){return e()}));e["s-rc"]=undefined}s();a();{var c=e["s-p"];var f=function(){return Te(e,t,r)};if(c.length===0){f()}else{Promise.all(c).then(f);t.$flags$|=4;c.length=0}}};var Te=function(e,t,r){var n=F("postUpdate",r.$tagName$);var i=t.$lazyInstance$;var a=t.$ancestorComponent$;if(!(t.$flags$&64)){t.$flags$|=64;{e.classList.add(W)}{Pe(i,"componentDidLoad")}n();{t.$onReadyResolve$(e);if(!a){Re()}}}else{n()}{t.$onInstanceResolve$(e)}{if(t.$onRenderResolve$){t.$onRenderResolve$();t.$onRenderResolve$=undefined}if(t.$flags$&512){L((function(){return ye(e,t,r,false)}))}t.$flags$&=~(4|512)}};var Se=function(e,t){{var r=T(e);if((r.$flags$&(2|16))===2){ye(e,r,t,false)}}};var Re=function(e){{m.documentElement.classList.add(W)}{h.$flags$|=2}};var Pe=function(e,t,r){if(e&&e[t]){try{return e[t](r)}catch(n){$(n)}}return undefined};var $e=function(e,t){return e&&e.then?e.then(t):t()};var be=function(e,t){return T(e).$instanceValues$.get(t)};var Ee=function(e,t,r,n){var i=T(e);var a=i.$hostElement$;var o=i.$instanceValues$.get(t);var s=i.$flags$;var c=i.$lazyInstance$;r=J(r,n.$members$[t][0]);if(r!==o&&(!(s&8)||o===undefined)){i.$instanceValues$.set(t,r);if(c){if(n.$watchers$&&s&128){var f=n.$watchers$[t];if(f){f.forEach((function(e){try{c[e](r,o,t)}catch(n){$(n)}}))}}if((s&(2|16))===2){ye(a,i,n,false)}}}};var _e=function(e,t,r){if(t.$members$){if(e.watchers){t.$watchers$=e.watchers}var n=Object.entries(t.$members$);var i=e.prototype;n.forEach((function(e){var n=e[0],a=e[1][0];if(a&31||r&2&&a&32){Object.defineProperty(i,n,{get:function(){return be(this,n)},set:function(e){Ee(this,n,e,t)},configurable:true,enumerable:true})}else if(r&1&&a&64){Object.defineProperty(i,n,{value:function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=T(this);return r.$onInstancePromise$.then((function(){var t;return(t=r.$lazyInstance$)[n].apply(t,e)}))}})}}));if(r&1){var a=new Map;i.attributeChangedCallback=function(e,t,r){var n=this;h.jmp((function(){var t=a.get(e);n[t]=r===null&&typeof n[t]==="boolean"?false:r}))};e.observedAttributes=n.filter((function(e){var t=e[0],r=e[1];return r[0]&15})).map((function(e){var r=e[0],n=e[1];var i=n[1]||r;a.set(i,r);if(n[0]&512){t.$attrsToReflect$.push([r,i])}return i}))}}return e};var we=function(e,t,n,i,a){return __awaiter(r,void 0,void 0,(function(){var r,i,o,s,c,f,d;return __generator(this,(function(p){switch(p.label){case 0:if(!((t.$flags$&32)===0))return[3,3];t.$flags$|=32;a=E(n);if(!a.then)return[3,2];r=G();return[4,a];case 1:a=p.sent();r();p.label=2;case 2:if(!a.isProxied){{n.$watchers$=a.watchers}_e(a,n,2);a.isProxied=true}i=F("createInstance",n.$tagName$);{t.$flags$|=8}try{new a(t)}catch(u){$(u)}{t.$flags$&=~8}{t.$flags$|=128}i();o=X(n.$tagName$);if(!_.has(o)&&a.style){s=F("registerStyles",n.$tagName$);c=a.style;q(o,c,!!(n.$flags$&1));s()}p.label=3;case 3:f=t.$ancestorComponent$;d=function(){return ye(e,t,n,true)};if(f&&f["s-rc"]){f["s-rc"].push(d)}else{d()}return[2]}}))}))};var ke=function(e,t){if((h.$flags$&1)===0){var r=F("connectedCallback",t.$tagName$);var i=T(e);if(!(i.$flags$&1)){i.$flags$|=1;var a=void 0;if(!a){if(t.$flags$&4||n.shadowDom){xe(e)}}{var o=e;while(o=o.parentNode||o.host){if(o["s-p"]){ge(i,i.$ancestorComponent$=o);break}}}if(t.$members$){Object.entries(t.$members$).forEach((function(t){var r=t[0],n=t[1][0];if(n&31&&e.hasOwnProperty(r)){var i=e[r];delete e[r];e[r]=i}}))}{L((function(){return we(e,i,t)}))}}r()}};var xe=function(e){var t="";var r=e["s-cr"]=m.createComment(t);r["s-cn"]=true;e.insertBefore(r,e.firstChild)};var De=function(e){if((h.$flags$&1)===0){var t=T(e);if(h.$cssShim$){h.$cssShim$.removeHost(e)}}};var Ie=e("b",(function(e,t){if(t===void 0){t={}}var r=F();var n=[];var i=t.exclude||[];var a=m.head;var o=v.customElements;var s=a.querySelector("meta[charset]");var c=m.createElement("style");var f=[];var d;var p=true;Object.assign(h,t);h.$resourcesUrl$=new URL(t.resourcesUrl||"./",m.baseURI).href;if(t.syncQueue){h.$flags$|=4}e.forEach((function(e){return e[1].forEach((function(t){var r={$flags$:t[0],$tagName$:t[1],$members$:t[2],$listeners$:t[3]};{r.$members$=t[2]}{r.$attrsToReflect$=[]}{r.$watchers$={}}var a=r.$tagName$;var s=function(e){__extends(t,e);function t(t){var r=e.call(this,t)||this;t=r;R(t);return r}t.prototype.connectedCallback=function(){var e=this;if(d){clearTimeout(d);d=null}if(p){f.push(this)}else{h.jmp((function(){return ke(e,r)}))}};t.prototype.disconnectedCallback=function(){var e=this;h.jmp((function(){return De(e)}))};t.prototype["s-hmr"]=function(e){};t.prototype.forceUpdate=function(){Se(this,r)};t.prototype.componentOnReady=function(){return T(this).$onReadyPromise$};return t}(HTMLElement);r.$lazyBundleIds$=e[0];if(!i.includes(a)&&!o.get(a)){n.push(a);o.define(a,_e(s,r,1))}}))}));c.innerHTML=n+"{visibility:hidden}.hydrated{visibility:inherit}";c.setAttribute("data-styles","");a.insertBefore(c,s?s.nextSibling:a.firstChild);p=false;if(f.length>0){f.forEach((function(e){return e.connectedCallback()}))}else{h.jmp((function(){return d=setTimeout(Re,30,"timeout")}))}r()}));var Me=e("c",(function(e,t,r){var n=Oe(e);return{emit:function(e){return n.dispatchEvent(new CustomEvent(t,{bubbles:!!(r&4),composed:!!(r&2),cancelable:!!(r&1),detail:e}))}}}));var Oe=e("g",(function(e){return T(e).$hostElement$}));var Le=true;var je=true;function Ne(e,t,r){var n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}function Ae(e,t,r){if(!e.RTCPeerConnection){return}var n=e.RTCPeerConnection.prototype;var i=n.addEventListener;n.addEventListener=function(e,n){if(e!==t){return i.apply(this,arguments)}var a=function(e){var t=r(e);if(t){n(t)}};this._eventMap=this._eventMap||{};this._eventMap[n]=a;return i.apply(this,[e,a])};var a=n.removeEventListener;n.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[r]){return a.apply(this,arguments)}var n=this._eventMap[r];delete this._eventMap[r];return a.apply(this,[e,n])};Object.defineProperty(n,"on"+t,{get:function(){return this["_on"+t]},set:function(e){if(this["_on"+t]){this.removeEventListener(t,this["_on"+t]);delete this["_on"+t]}if(e){this.addEventListener(t,this["_on"+t]=e)}},enumerable:true,configurable:true})}function Ue(e){if(typeof e!=="boolean"){return new Error("Argument type: "+typeof e+". Please use a boolean.")}Le=e;return e?"adapter.js logging disabled":"adapter.js logging enabled"}function Fe(e){if(typeof e!=="boolean"){return new Error("Argument type: "+typeof e+". Please use a boolean.")}je=!e;return"adapter.js deprecation warnings "+(e?"disabled":"enabled")}function Ge(){if(typeof window==="object"){if(Le){return}if(typeof console!=="undefined"&&typeof console.log==="function"){console.log.apply(console,arguments)}}}function ze(e,t){if(!je){return}console.warn(e+" is deprecated, please use "+t+" instead.")}function Be(e){var t=e.navigator;var r={browser:null,version:null};if(typeof e==="undefined"||!e.navigator){r.browser="Not a browser.";return r}if(t.mozGetUserMedia){r.browser="firefox";r.version=Ne(t.userAgent,/Firefox\/(\d+)\./,1)}else if(t.webkitGetUserMedia||e.isSecureContext===false&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer){r.browser="chrome";r.version=Ne(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2)}else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/)){r.browser="edge";r.version=Ne(t.userAgent,/Edge\/(\d+).(\d+)$/,2)}else if(e.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./)){r.browser="safari";r.version=Ne(t.userAgent,/AppleWebKit\/(\d+)\./,1);r.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}else{r.browser="Not a supported browser.";return r}return r}function Ve(e){return Object.prototype.toString.call(e)==="[object Object]"}function Je(e){if(!Ve(e)){return e}return Object.keys(e).reduce((function(t,r){var n;var i=Ve(e[r]);var a=i?Je(e[r]):e[r];var o=i&&!Object.keys(a).length;if(a===undefined||o){return t}return Object.assign(t,(n={},n[r]=a,n))}),{})}function We(e,t,r){if(!t||r.has(t.id)){return}r.set(t.id,t);Object.keys(t).forEach((function(n){if(n.endsWith("Id")){We(e,e.get(t[n]),r)}else if(n.endsWith("Ids")){t[n].forEach((function(t){We(e,e.get(t),r)}))}}))}function He(e,t,r){var n=r?"outbound-rtp":"inbound-rtp";var i=new Map;if(t===null){return i}var a=[];e.forEach((function(e){if(e.type==="track"&&e.trackIdentifier===t.id){a.push(e)}}));a.forEach((function(t){e.forEach((function(r){if(r.type===n&&r.trackId===t.id){We(e,r,i)}}))}));return i}var qe=Ge;function Ke(e){var t=e&&e.navigator;if(!t.mediaDevices){return}var r=Be(e);var n=function(e){if(typeof e!=="object"||e.mandatory||e.optional){return e}var t={};Object.keys(e).forEach((function(r){if(r==="require"||r==="advanced"||r==="mediaSource"){return}var n=typeof e[r]==="object"?e[r]:{ideal:e[r]};if(n.exact!==undefined&&typeof n.exact==="number"){n.min=n.max=n.exact}var i=function(e,t){if(e){return e+t.charAt(0).toUpperCase()+t.slice(1)}return t==="deviceId"?"sourceId":t};if(n.ideal!==undefined){t.optional=t.optional||[];var a={};if(typeof n.ideal==="number"){a[i("min",r)]=n.ideal;t.optional.push(a);a={};a[i("max",r)]=n.ideal;t.optional.push(a)}else{a[i("",r)]=n.ideal;t.optional.push(a)}}if(n.exact!==undefined&&typeof n.exact!=="number"){t.mandatory=t.mandatory||{};t.mandatory[i("",r)]=n.exact}else{["min","max"].forEach((function(e){if(n[e]!==undefined){t.mandatory=t.mandatory||{};t.mandatory[i(e,r)]=n[e]}}))}}));if(e.advanced){t.optional=(t.optional||[]).concat(e.advanced)}return t};var i=function(e,i){if(r.version>=61){return i(e)}e=JSON.parse(JSON.stringify(e));if(e&&typeof e.audio==="object"){var a=function(e,t,r){if(t in e&&!(r in e)){e[r]=e[t];delete e[t]}};e=JSON.parse(JSON.stringify(e));a(e.audio,"autoGainControl","googAutoGainControl");a(e.audio,"noiseSuppression","googNoiseSuppression");e.audio=n(e.audio)}if(e&&typeof e.video==="object"){var o=e.video.facingMode;o=o&&(typeof o==="object"?o:{ideal:o});var s=r.version<66;if(o&&(o.exact==="user"||o.exact==="environment"||o.ideal==="user"||o.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!s)){delete e.video.facingMode;var c;if(o.exact==="environment"||o.ideal==="environment"){c=["back","rear"]}else if(o.exact==="user"||o.ideal==="user"){c=["front"]}if(c){return t.mediaDevices.enumerateDevices().then((function(t){t=t.filter((function(e){return e.kind==="videoinput"}));var r=t.find((function(e){return c.some((function(t){return e.label.toLowerCase().includes(t)}))}));if(!r&&t.length&&c.includes("back")){r=t[t.length-1]}if(r){e.video.deviceId=o.exact?{exact:r.deviceId}:{ideal:r.deviceId}}e.video=n(e.video);qe("chrome: "+JSON.stringify(e));return i(e)}))}}e.video=n(e.video)}qe("chrome: "+JSON.stringify(e));return i(e)};var a=function(e){if(r.version>=64){return e}return{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};var o=function(e,r,n){i(e,(function(e){t.webkitGetUserMedia(e,r,(function(e){if(n){n(a(e))}}))}))};t.getUserMedia=o.bind(t);if(t.mediaDevices.getUserMedia){var s=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return i(e,(function(e){return s(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length){t.getTracks().forEach((function(e){e.stop()}));throw new DOMException("","NotFoundError")}return t}),(function(e){return Promise.reject(a(e))}))}))}}}function Qe(e,t){if(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices){return}if(!e.navigator.mediaDevices){return}if(typeof t!=="function"){console.error("shimGetDisplayMedia: getSourceId argument is not "+"a function");return}e.navigator.mediaDevices.getDisplayMedia=function r(n){return t(n).then((function(t){var r=n.video&&n.video.width;var i=n.video&&n.video.height;var a=n.video&&n.video.frameRate;n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:a||3}};if(r){n.video.mandatory.maxWidth=r}if(i){n.video.mandatory.maxHeight=i}return e.navigator.mediaDevices.getUserMedia(n)}))}}function Xe(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Ye(e){if(typeof e==="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){if(this._ontrack){this.removeEventListener("track",this._ontrack)}this.addEventListener("track",this._ontrack=e)},enumerable:true,configurable:true});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function r(){var n=this;if(!this._ontrackpoly){this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var i;if(e.RTCPeerConnection.prototype.getReceivers){i=n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id}))}else{i={track:r.track}}var a=new Event("track");a.track=r.track;a.receiver=i;a.transceiver={receiver:i};a.streams=[t.stream];n.dispatchEvent(a)}));t.stream.getTracks().forEach((function(r){var i;if(e.RTCPeerConnection.prototype.getReceivers){i=n.getReceivers().find((function(e){return e.track&&e.track.id===r.id}))}else{i={track:r}}var a=new Event("track");a.track=r;a.receiver=i;a.transceiver={receiver:i};a.streams=[t.stream];n.dispatchEvent(a)}))};this.addEventListener("addstream",this._ontrackpoly)}return t.apply(this,arguments)}}else{Ae(e,"track",(function(e){if(!e.transceiver){Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}})}return e}))}}function Ze(e){if(typeof e==="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){if(this._dtmf===undefined){if(t.kind==="audio"){this._dtmf=e.createDTMFSender(t)}else{this._dtmf=null}}return this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function e(){this._senders=this._senders||[];return this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function e(n,i){var a=r.apply(this,arguments);if(!a){a=t(this,n);this._senders.push(a)}return a};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function e(t){n.apply(this,arguments);var r=this._senders.indexOf(t);if(r!==-1){this._senders.splice(r,1)}}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function e(r){var n=this;this._senders=this._senders||[];i.apply(this,[r]);r.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function e(t){var r=this;this._senders=this._senders||[];a.apply(this,[t]);t.getTracks().forEach((function(e){var t=r._senders.find((function(t){return t.track===e}));if(t){r._senders.splice(r._senders.indexOf(t),1)}}))}}else if(typeof e==="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var o=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function e(){var t=this;var r=o.apply(this,[]);r.forEach((function(e){return e._pc=t}));return r};Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){if(this._dtmf===undefined){if(this.track.kind==="audio"){this._dtmf=this._pc.createDTMFSender(this.track)}else{this._dtmf=null}}return this._dtmf}})}}function et(e){if(!e.RTCPeerConnection){return}var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function e(){var r=this;var n=arguments[0],i=arguments[1],a=arguments[2];if(arguments.length>0&&typeof n==="function"){return t.apply(this,arguments)}if(t.length===0&&(arguments.length===0||typeof n!=="function")){return t.apply(this,[])}var o=function(e){var t={};var r=e.result();r.forEach((function(e){var r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){r[t]=e.stat(t)}));t[r.id]=r}));return t};var s=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){i(s(o(e)))};return t.apply(this,[c,n])}return new Promise((function(e,n){t.apply(r,[function(t){e(s(o(t)))},n])})).then(i,a)}}function tt(e){if(!(typeof e==="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver)){return}if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;if(t){e.RTCPeerConnection.prototype.getSenders=function e(){var r=this;var n=t.apply(this,[]);n.forEach((function(e){return e._pc=r}));return n}}var r=e.RTCPeerConnection.prototype.addTrack;if(r){e.RTCPeerConnection.prototype.addTrack=function e(){var t=r.apply(this,arguments);t._pc=this;return t}}e.RTCRtpSender.prototype.getStats=function e(){var t=this;return this._pc.getStats().then((function(e){return He(e,t.track,true)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var n=e.RTCPeerConnection.prototype.getReceivers;if(n){e.RTCPeerConnection.prototype.getReceivers=function e(){var t=this;var r=n.apply(this,[]);r.forEach((function(e){return e._pc=t}));return r}}Ae(e,"track",(function(e){e.receiver._pc=e.srcElement;return e}));e.RTCRtpReceiver.prototype.getStats=function e(){var t=this;return this._pc.getStats().then((function(e){return He(e,t.track,false)}))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype)){return}var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function t(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var r=arguments[0];var n;var a;var o;this.getSenders().forEach((function(e){if(e.track===r){if(n){o=true}else{n=e}}}));this.getReceivers().forEach((function(e){if(e.track===r){if(a){o=true}else{a=e}}return e.track===r}));if(o||n&&a){return Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError"))}else if(n){return n.getStats()}else if(a){return a.getStats()}return Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}function rt(e){e.RTCPeerConnection.prototype.getLocalStreams=function e(){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{};return Object.keys(this._shimmedLocalStreams).map((function(e){return t._shimmedLocalStreams[e][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function e(r,n){if(!n){return t.apply(this,arguments)}this._shimmedLocalStreams=this._shimmedLocalStreams||{};var i=t.apply(this,arguments);if(!this._shimmedLocalStreams[n.id]){this._shimmedLocalStreams[n.id]=[n,i]}else if(this._shimmedLocalStreams[n.id].indexOf(i)===-1){this._shimmedLocalStreams[n.id].push(i)}return i};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function e(t){var n=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{};t.getTracks().forEach((function(e){var t=n.getSenders().find((function(t){return t.track===e}));if(t){throw new DOMException("Track already exists.","InvalidAccessError")}}));var i=this.getSenders();r.apply(this,arguments);var a=this.getSenders().filter((function(e){return i.indexOf(e)===-1}));this._shimmedLocalStreams[t.id]=[t].concat(a)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function e(t){this._shimmedLocalStreams=this._shimmedLocalStreams||{};delete this._shimmedLocalStreams[t.id];return n.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function e(t){var r=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{};if(t){Object.keys(this._shimmedLocalStreams).forEach((function(e){var n=r._shimmedLocalStreams[e].indexOf(t);if(n!==-1){r._shimmedLocalStreams[e].splice(n,1)}if(r._shimmedLocalStreams[e].length===1){delete r._shimmedLocalStreams[e]}}))}return i.apply(this,arguments)}}function nt(e){if(!e.RTCPeerConnection){return}var t=Be(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65){return rt(e)}var r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function e(){var t=this;var n=r.apply(this);this._reverseStreams=this._reverseStreams||{};return n.map((function(e){return t._reverseStreams[e.id]}))};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function t(r){var i=this;this._streams=this._streams||{};this._reverseStreams=this._reverseStreams||{};r.getTracks().forEach((function(e){var t=i.getSenders().find((function(t){return t.track===e}));if(t){throw new DOMException("Track already exists.","InvalidAccessError")}}));if(!this._reverseStreams[r.id]){var a=new e.MediaStream(r.getTracks());this._streams[r.id]=a;this._reverseStreams[a.id]=r;r=a}n.apply(this,[r])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function e(t){this._streams=this._streams||{};this._reverseStreams=this._reverseStreams||{};i.apply(this,[this._streams[t.id]||t]);delete this._reverseStreams[this._streams[t.id]?this._streams[t.id].id:t.id];delete this._streams[t.id]};e.RTCPeerConnection.prototype.addTrack=function t(r,n){var i=this;if(this.signalingState==="closed"){throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError")}var a=[].slice.call(arguments,1);if(a.length!==1||!a[0].getTracks().find((function(e){return e===r}))){throw new DOMException("The adapter.js addTrack polyfill only supports a single "+" stream which is associated with the specified track.","NotSupportedError")}var o=this.getSenders().find((function(e){return e.track===r}));if(o){throw new DOMException("Track already exists.","InvalidAccessError")}this._streams=this._streams||{};this._reverseStreams=this._reverseStreams||{};var s=this._streams[n.id];if(s){s.addTrack(r);Promise.resolve().then((function(){i.dispatchEvent(new Event("negotiationneeded"))}))}else{var c=new e.MediaStream([r]);this._streams[n.id]=c;this._reverseStreams[c.id]=n;this.addStream(c)}return this.getSenders().find((function(e){return e.track===r}))};function a(e,t){var r=t.sdp;Object.keys(e._reverseStreams||[]).forEach((function(t){var n=e._reverseStreams[t];var i=e._streams[n.id];r=r.replace(new RegExp(i.id,"g"),n.id)}));return new RTCSessionDescription({type:t.type,sdp:r})}function o(e,t){var r=t.sdp;Object.keys(e._reverseStreams||[]).forEach((function(t){var n=e._reverseStreams[t];var i=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),i.id)}));return new RTCSessionDescription({type:t.type,sdp:r})}["createOffer","createAnswer"].forEach((function(t){var r;var n=e.RTCPeerConnection.prototype[t];var i=(r={},r[t]=function(){var e=this;var t=arguments;var r=arguments.length&&typeof arguments[0]==="function";if(r){return n.apply(this,[function(r){var n=a(e,r);t[0].apply(null,[n])},function(e){if(t[1]){t[1].apply(null,e)}},arguments[2]])}return n.apply(this,arguments).then((function(t){return a(e,t)}))},r);e.RTCPeerConnection.prototype[t]=i[t]}));var s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function e(){if(!arguments.length||!arguments[0].type){return s.apply(this,arguments)}arguments[0]=o(this,arguments[0]);return s.apply(this,arguments)};var c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=c.get.apply(this);if(e.type===""){return e}return a(this,e)}});e.RTCPeerConnection.prototype.removeTrack=function e(t){var r=this;if(this.signalingState==="closed"){throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError")}if(!t._pc){throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack "+"does not implement interface RTCRtpSender.","TypeError")}var n=t._pc===this;if(!n){throw new DOMException("Sender was not created by this connection.","InvalidAccessError")}this._streams=this._streams||{};var i;Object.keys(this._streams).forEach((function(e){var n=r._streams[e].getTracks().find((function(e){return t.track===e}));if(n){i=r._streams[e]}}));if(i){if(i.getTracks().length===1){this.removeStream(this._reverseStreams[i.id])}else{i.removeTrack(t.track)}this.dispatchEvent(new Event("negotiationneeded"))}}}function it(e){var t=Be(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection){e.RTCPeerConnection=e.webkitRTCPeerConnection}if(!e.RTCPeerConnection){return}if(t.version<53){["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var r;var n=e.RTCPeerConnection.prototype[t];var i=(r={},r[t]=function(){arguments[0]=new(t==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]);return n.apply(this,arguments)},r);e.RTCPeerConnection.prototype[t]=i[t]}))}var r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function e(){if(!arguments[0]){if(arguments[1]){arguments[1].apply(null)}return Promise.resolve()}if(t.version<78&&arguments[0]&&arguments[0].candidate===""){return Promise.resolve()}return r.apply(this,arguments)}}function at(e){Ae(e,"negotiationneeded",(function(e){var t=e.target;if(t.signalingState!=="stable"){return}return e}))}var ot=Object.freeze({__proto__:null,shimMediaStream:Xe,shimOnTrack:Ye,shimGetSendersWithDtmf:Ze,shimGetStats:et,shimSenderReceiverGetStats:tt,shimAddTrackRemoveTrackWithNative:rt,shimAddTrackRemoveTrack:nt,shimPeerConnection:it,fixNegotiationNeeded:at,shimGetUserMedia:Ke,shimGetDisplayMedia:Qe});function st(e,t){var r=false;e=JSON.parse(JSON.stringify(e));return e.filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;if(e.url&&!e.urls){ze("RTCIceServer.url","RTCIceServer.urls")}var n=typeof t==="string";if(n){t=[t]}t=t.filter((function(e){if(e.indexOf("stun:")===0){return false}var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");if(t&&!r){r=true;return true}return t&&!r}));delete e.url;e.urls=n?t[0]:t;return!!t.length}}))}function ct(e,t){return t={exports:{}},e(t,t.exports),t.exports}var ft=ct((function(e){var t={};t.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)};t.localCName=t.generateIdentifier();t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))};t.splitSections=function(e){var t=e.split("\nm=");return t.map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))};t.getDescription=function(e){var r=t.splitSections(e);return r&&r[0]};t.getMediaSections=function(e){var r=t.splitSections(e);r.shift();return r};t.matchPrefix=function(e,r){return t.splitLines(e).filter((function(e){return e.indexOf(r)===0}))};t.parseCandidate=function(e){var t;if(e.indexOf("a=candidate:")===0){t=e.substring(12).split(" ")}else{t=e.substring(10).split(" ")}var r={foundation:t[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(var n=8;n<t.length;n+=2){switch(t[n]){case"raddr":r.relatedAddress=t[n+1];break;case"rport":r.relatedPort=parseInt(t[n+1],10);break;case"tcptype":r.tcpType=t[n+1];break;case"ufrag":r.ufrag=t[n+1];r.usernameFragment=t[n+1];break;default:r[t[n]]=t[n+1];break}}return r};t.writeCandidate=function(e){var t=[];t.push(e.foundation);t.push(e.component);t.push(e.protocol.toUpperCase());t.push(e.priority);t.push(e.address||e.ip);t.push(e.port);var r=e.type;t.push("typ");t.push(r);if(r!=="host"&&e.relatedAddress&&e.relatedPort){t.push("raddr");t.push(e.relatedAddress);t.push("rport");t.push(e.relatedPort)}if(e.tcpType&&e.protocol.toLowerCase()==="tcp"){t.push("tcptype");t.push(e.tcpType)}if(e.usernameFragment||e.ufrag){t.push("ufrag");t.push(e.usernameFragment||e.ufrag)}return"candidate:"+t.join(" ")};t.parseIceOptions=function(e){return e.substr(14).split(" ")};t.parseRtpMap=function(e){var t=e.substr(9).split(" ");var r={payloadType:parseInt(t.shift(),10)};t=t[0].split("/");r.name=t[0];r.clockRate=parseInt(t[1],10);r.channels=t.length===3?parseInt(t[2],10):1;r.numChannels=r.channels;return r};t.writeRtpMap=function(e){var t=e.payloadType;if(e.preferredPayloadType!==undefined){t=e.preferredPayloadType}var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(r!==1?"/"+r:"")+"\r\n"};t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}};t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&e.direction!=="sendrecv"?"/"+e.direction:"")+" "+e.uri+"\r\n"};t.parseFmtp=function(e){var t={};var r;var n=e.substr(e.indexOf(" ")+1).split(";");for(var i=0;i<n.length;i++){r=n[i].trim().split("=");t[r[0].trim()]=r[1]}return t};t.writeFmtp=function(e){var t="";var r=e.payloadType;if(e.preferredPayloadType!==undefined){r=e.preferredPayloadType}if(e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach((function(t){if(e.parameters[t]){n.push(t+"="+e.parameters[t])}else{n.push(t)}}));t+="a=fmtp:"+r+" "+n.join(";")+"\r\n"}return t};t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}};t.writeRtcpFb=function(e){var t="";var r=e.payloadType;if(e.preferredPayloadType!==undefined){r=e.preferredPayloadType}if(e.rtcpFeedback&&e.rtcpFeedback.length){e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}))}return t};t.parseSsrcMedia=function(e){var t=e.indexOf(" ");var r={ssrc:parseInt(e.substr(7,t-7),10)};var n=e.indexOf(":",t);if(n>-1){r.attribute=e.substr(t+1,n-t-1);r.value=e.substr(n+1)}else{r.attribute=e.substr(t+1)}return r};t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}};t.getMid=function(e){var r=t.matchPrefix(e,"a=mid:")[0];if(r){return r.substr(6)}};t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}};t.getDtlsParameters=function(e,r){var n=t.matchPrefix(e+r,"a=fingerprint:");return{role:"auto",fingerprints:n.map(t.parseFingerprint)}};t.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";e.fingerprints.forEach((function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}));return r};t.getIceParameters=function(e,r){var n=t.splitLines(e);n=n.concat(t.splitLines(r));var i={usernameFragment:n.filter((function(e){return e.indexOf("a=ice-ufrag:")===0}))[0].substr(12),password:n.filter((function(e){return e.indexOf("a=ice-pwd:")===0}))[0].substr(10)};return i};t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\n"+"a=ice-pwd:"+e.password+"\r\n"};t.parseRtpParameters=function(e){var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]};var n=t.splitLines(e);var i=n[0].split(" ");for(var a=3;a<i.length;a++){var o=i[a];var s=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var c=t.parseRtpMap(s);var f=t.matchPrefix(e,"a=fmtp:"+o+" ");c.parameters=f.length?t.parseFmtp(f[0]):{};c.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb);r.codecs.push(c);switch(c.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(c.name.toUpperCase());break;default:break}}}t.matchPrefix(e,"a=extmap:").forEach((function(e){r.headerExtensions.push(t.parseExtmap(e))}));return r};t.writeRtpDescription=function(e,r){var n="";n+="m="+e+" ";n+=r.codecs.length>0?"9":"0";n+=" UDP/TLS/RTP/SAVPF ";n+=r.codecs.map((function(e){if(e.preferredPayloadType!==undefined){return e.preferredPayloadType}return e.payloadType})).join(" ")+"\r\n";n+="c=IN IP4 0.0.0.0\r\n";n+="a=rtcp:9 IN IP4 0.0.0.0\r\n";r.codecs.forEach((function(e){n+=t.writeRtpMap(e);n+=t.writeFmtp(e);n+=t.writeRtcpFb(e)}));var i=0;r.codecs.forEach((function(e){if(e.maxptime>i){i=e.maxptime}}));if(i>0){n+="a=maxptime:"+i+"\r\n"}n+="a=rtcp-mux\r\n";if(r.headerExtensions){r.headerExtensions.forEach((function(e){n+=t.writeExtmap(e)}))}return n};t.parseRtpEncodingParameters=function(e){var r=[];var n=t.parseRtpParameters(e);var i=n.fecMechanisms.indexOf("RED")!==-1;var a=n.fecMechanisms.indexOf("ULPFEC")!==-1;var o=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return e.attribute==="cname"}));var s=o.length>0&&o[0].ssrc;var c;var f=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){var t=e.substr(17).split(" ");return t.map((function(e){return parseInt(e,10)}))}));if(f.length>0&&f[0].length>1&&f[0][0]===s){c=f[0][1]}n.codecs.forEach((function(e){if(e.name.toUpperCase()==="RTX"&&e.parameters.apt){var t={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10)};if(s&&c){t.rtx={ssrc:c}}r.push(t);if(i){t=JSON.parse(JSON.stringify(t));t.fec={ssrc:s,mechanism:a?"red+ulpfec":"red"};r.push(t)}}}));if(r.length===0&&s){r.push({ssrc:s})}var d=t.matchPrefix(e,"b=");if(d.length){if(d[0].indexOf("b=TIAS:")===0){d=parseInt(d[0].substr(7),10)}else if(d[0].indexOf("b=AS:")===0){d=parseInt(d[0].substr(5),10)*1e3*.95-50*40*8}else{d=undefined}r.forEach((function(e){e.maxBitrate=d}))}return r};t.parseRtcpParameters=function(e){var r={};var n=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return e.attribute==="cname"}))[0];if(n){r.cname=n.value;r.ssrc=n.ssrc}var i=t.matchPrefix(e,"a=rtcp-rsize");r.reducedSize=i.length>0;r.compound=i.length===0;var a=t.matchPrefix(e,"a=rtcp-mux");r.mux=a.length>0;return r};t.parseMsid=function(e){var r;var n=t.matchPrefix(e,"a=msid:");if(n.length===1){r=n[0].substr(7).split(" ");return{stream:r[0],track:r[1]}}var i=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return e.attribute==="msid"}));if(i.length>0){r=i[0].value.split(" ");return{stream:r[0],track:r[1]}}};t.parseSctpDescription=function(e){var r=t.parseMLine(e);var n=t.matchPrefix(e,"a=max-message-size:");var i;if(n.length>0){i=parseInt(n[0].substr(19),10)}if(isNaN(i)){i=65536}var a=t.matchPrefix(e,"a=sctp-port:");if(a.length>0){return{port:parseInt(a[0].substr(12),10),protocol:r.fmt,maxMessageSize:i}}var o=t.matchPrefix(e,"a=sctpmap:");if(o.length>0){var s=t.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:i}}};t.writeSctpDescription=function(e,t){var r=[];if(e.protocol!=="DTLS/SCTP"){r=["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]}else{r=["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"]}if(t.maxMessageSize!==undefined){r.push("a=max-message-size:"+t.maxMessageSize+"\r\n")}return r.join("")};t.generateSessionId=function(){return Math.random().toString().substr(2,21)};t.writeSessionBoilerplate=function(e,r,n){var i;var a=r!==undefined?r:2;if(e){i=e}else{i=t.generateSessionId()}var o=n||"thisisadapterortc";return"v=0\r\n"+"o="+o+" "+i+" "+a+" IN IP4 127.0.0.1\r\n"+"s=-\r\n"+"t=0 0\r\n"};t.writeMediaSection=function(e,r,n,i){var a=t.writeRtpDescription(e.kind,r);a+=t.writeIceParameters(e.iceGatherer.getLocalParameters());a+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),n==="offer"?"actpass":"active");a+="a=mid:"+e.mid+"\r\n";if(e.direction){a+="a="+e.direction+"\r\n"}else if(e.rtpSender&&e.rtpReceiver){a+="a=sendrecv\r\n"}else if(e.rtpSender){a+="a=sendonly\r\n"}else if(e.rtpReceiver){a+="a=recvonly\r\n"}else{a+="a=inactive\r\n"}if(e.rtpSender){var o="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";a+="a="+o;a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+o;if(e.sendEncodingParameters[0].rtx){a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+o;a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n"}}a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n";if(e.rtpSender&&e.sendEncodingParameters[0].rtx){a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"}return a};t.getDirection=function(e,r){var n=t.splitLines(e);for(var i=0;i<n.length;i++){switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2);default:}}if(r){return t.getDirection(r)}return"sendrecv"};t.getKind=function(e){var r=t.splitLines(e);var n=r[0].split(" ");return n[0].substr(2)};t.isRejected=function(e){return e.split(" ",2)[1]==="0"};t.parseMLine=function(e){var r=t.splitLines(e);var n=r[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}};t.parseOLine=function(e){var r=t.matchPrefix(e,"o=")[0];var n=r.substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}};t.isValidSDP=function(e){if(typeof e!=="string"||e.length===0){return false}var r=t.splitLines(e);for(var n=0;n<r.length;n++){if(r[n].length<2||r[n].charAt(1)!=="="){return false}}return true};{e.exports=t}}));function dt(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function pt(e,t,r,n,i){var a=ft.writeRtpDescription(e.kind,t);a+=ft.writeIceParameters(e.iceGatherer.getLocalParameters());a+=ft.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),r==="offer"?"actpass":i||"active");a+="a=mid:"+e.mid+"\r\n";if(e.rtpSender&&e.rtpReceiver){a+="a=sendrecv\r\n"}else if(e.rtpSender){a+="a=sendonly\r\n"}else if(e.rtpReceiver){a+="a=recvonly\r\n"}else{a+="a=inactive\r\n"}if(e.rtpSender){var o=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=o;var s="msid:"+(n?n.id:"-")+" "+o+"\r\n";a+="a="+s;a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s;if(e.sendEncodingParameters[0].rtx){a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s;a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n"}}a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+ft.localCName+"\r\n";if(e.rtpSender&&e.sendEncodingParameters[0].rtx){a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+ft.localCName+"\r\n"}return a}function ut(e,t){var r=false;e=JSON.parse(JSON.stringify(e));return e.filter((function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;if(e.url&&!e.urls){console.warn("RTCIceServer.url is deprecated! Use urls instead.")}var i=typeof n==="string";if(i){n=[n]}n=n.filter((function(e){var n=e.indexOf("turn:")===0&&e.indexOf("transport=udp")!==-1&&e.indexOf("turn:[")===-1&&!r;if(n){r=true;return true}return e.indexOf("stun:")===0&&t>=14393&&e.indexOf("?transport=udp")===-1}));delete e.url;e.urls=i?n[0]:n;return!!n.length}}))}function lt(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]};var n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++){if(t[r].payloadType===e||t[r].preferredPayloadType===e){return t[r]}}};var i=function(e,t,r,i){var a=n(e.parameters.apt,r);var o=n(t.parameters.apt,i);return a&&o&&a.name.toLowerCase()===o.name.toLowerCase()};e.codecs.forEach((function(n){for(var a=0;a<t.codecs.length;a++){var o=t.codecs[a];if(n.name.toLowerCase()===o.name.toLowerCase()&&n.clockRate===o.clockRate){if(n.name.toLowerCase()==="rtx"&&n.parameters&&o.parameters.apt){if(!i(n,o,e.codecs,t.codecs)){continue}}o=JSON.parse(JSON.stringify(o));o.numChannels=Math.min(n.numChannels,o.numChannels);r.codecs.push(o);o.rtcpFeedback=o.rtcpFeedback.filter((function(e){for(var t=0;t<n.rtcpFeedback.length;t++){if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter){return true}}return false}));break}}}));e.headerExtensions.forEach((function(e){for(var n=0;n<t.headerExtensions.length;n++){var i=t.headerExtensions[n];if(e.uri===i.uri){r.headerExtensions.push(i);break}}}));return r}function vt(e,t,r){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)!==-1}function mt(e,t){var r=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));if(!r){e.addRemoteCandidate(t)}return!r}function ht(e,t){var r=new Error(t);r.name=e;r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:undefined,OperationError:undefined}[e];return r}var gt=function(e,t){function r(t,r){r.addTrack(t);r.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function n(t,r){r.removeTrack(t);r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}function i(t,r,n,i){var a=new Event("track");a.track=r;a.receiver=n;a.transceiver={receiver:n};a.streams=i;e.setTimeout((function(){t._dispatchEvent("track",a)}))}var a=function(r){var n=this;var i=document.createDocumentFragment();["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){n[e]=i[e].bind(i)}));this.canTrickleIceCandidates=null;this.needNegotiation=false;this.localStreams=[];this.remoteStreams=[];this._localDescription=null;this._remoteDescription=null;this.signalingState="stable";this.iceConnectionState="new";this.connectionState="new";this.iceGatheringState="new";r=JSON.parse(JSON.stringify(r||{}));this.usingBundle=r.bundlePolicy==="max-bundle";if(r.rtcpMuxPolicy==="negotiate"){throw ht("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported")}else if(!r.rtcpMuxPolicy){r.rtcpMuxPolicy="require"}switch(r.iceTransportPolicy){case"all":case"relay":break;default:r.iceTransportPolicy="all";break}switch(r.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:r.bundlePolicy="balanced";break}r.iceServers=ut(r.iceServers||[],t);this._iceGatherers=[];if(r.iceCandidatePoolSize){for(var a=r.iceCandidatePoolSize;a>0;a--){this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}))}}else{r.iceCandidatePoolSize=0}this._config=r;this.transceivers=[];this._sdpSessionId=ft.generateSessionId();this._sdpSessionVersion=0;this._dtlsRole=undefined;this._isClosed=false};Object.defineProperty(a.prototype,"localDescription",{configurable:true,get:function(){return this._localDescription}});Object.defineProperty(a.prototype,"remoteDescription",{configurable:true,get:function(){return this._remoteDescription}});a.prototype.onicecandidate=null;a.prototype.onaddstream=null;a.prototype.ontrack=null;a.prototype.onremovestream=null;a.prototype.onsignalingstatechange=null;a.prototype.oniceconnectionstatechange=null;a.prototype.onconnectionstatechange=null;a.prototype.onicegatheringstatechange=null;a.prototype.onnegotiationneeded=null;a.prototype.ondatachannel=null;a.prototype._dispatchEvent=function(e,t){if(this._isClosed){return}this.dispatchEvent(t);if(typeof this["on"+e]==="function"){this["on"+e](t)}};a.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)};a.prototype.getConfiguration=function(){return this._config};a.prototype.getLocalStreams=function(){return this.localStreams};a.prototype.getRemoteStreams=function(){return this.remoteStreams};a.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0;var n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:true};if(this.usingBundle&&r){n.iceTransport=this.transceivers[0].iceTransport;n.dtlsTransport=this.transceivers[0].dtlsTransport}else{var i=this._createIceAndDtlsTransports();n.iceTransport=i.iceTransport;n.dtlsTransport=i.dtlsTransport}if(!t){this.transceivers.push(n)}return n};a.prototype.addTrack=function(t,r){if(this._isClosed){throw ht("InvalidStateError","Attempted to call addTrack on a closed peerconnection.")}var n=this.transceivers.find((function(e){return e.track===t}));if(n){throw ht("InvalidAccessError","Track already exists.")}var i;for(var a=0;a<this.transceivers.length;a++){if(!this.transceivers[a].track&&this.transceivers[a].kind===t.kind){i=this.transceivers[a]}}if(!i){i=this._createTransceiver(t.kind)}this._maybeFireNegotiationNeeded();if(this.localStreams.indexOf(r)===-1){this.localStreams.push(r)}i.track=t;i.stream=r;i.rtpSender=new e.RTCRtpSender(t,i.dtlsTransport);return i.rtpSender};a.prototype.addStream=function(e){var r=this;if(t>=15025){e.getTracks().forEach((function(t){r.addTrack(t,e)}))}else{var n=e.clone();e.getTracks().forEach((function(e,t){var r=n.getTracks()[t];e.addEventListener("enabled",(function(e){r.enabled=e.enabled}))}));n.getTracks().forEach((function(e){r.addTrack(e,n)}))}};a.prototype.removeTrack=function(t){if(this._isClosed){throw ht("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.")}if(!(t instanceof e.RTCRtpSender)){throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack "+"does not implement interface RTCRtpSender.")}var r=this.transceivers.find((function(e){return e.rtpSender===t}));if(!r){throw ht("InvalidAccessError","Sender was not created by this connection.")}var n=r.stream;r.rtpSender.stop();r.rtpSender=null;r.track=null;r.stream=null;var i=this.transceivers.map((function(e){return e.stream}));if(i.indexOf(n)===-1&&this.localStreams.indexOf(n)>-1){this.localStreams.splice(this.localStreams.indexOf(n),1)}this._maybeFireNegotiationNeeded()};a.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var r=t.getSenders().find((function(t){return t.track===e}));if(r){t.removeTrack(r)}}))};a.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))};a.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))};a.prototype._createIceGatherer=function(t,r){var n=this;if(r&&t>0){return this.transceivers[0].iceGatherer}else if(this._iceGatherers.length){return this._iceGatherers.shift()}var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});Object.defineProperty(i,"state",{value:"new",writable:true});this.transceivers[t].bufferedCandidateEvents=[];this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||Object.keys(e.candidate).length===0;i.state=r?"completed":"gathering";if(n.transceivers[t].bufferedCandidateEvents!==null){n.transceivers[t].bufferedCandidateEvents.push(e)}};i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates);return i};a.prototype._gather=function(t,r){var n=this;var i=this.transceivers[r].iceGatherer;if(i.onlocalcandidate){return}var a=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null;i.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates);i.onlocalcandidate=function(e){if(n.usingBundle&&r>0){return}var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:r};var o=e.candidate;var s=!o||Object.keys(o).length===0;if(s){if(i.state==="new"||i.state==="gathering"){i.state="completed"}}else{if(i.state==="new"){i.state="gathering"}o.component=1;o.ufrag=i.getLocalParameters().usernameFragment;var c=ft.writeCandidate(o);a.candidate=Object.assign(a.candidate,ft.parseCandidate(c));a.candidate.candidate=c;a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}}var f=ft.getMediaSections(n._localDescription.sdp);if(!s){f[a.candidate.sdpMLineIndex]+="a="+a.candidate.candidate+"\r\n"}else{f[a.candidate.sdpMLineIndex]+="a=end-of-candidates\r\n"}n._localDescription.sdp=ft.getDescription(n._localDescription.sdp)+f.join("");var d=n.transceivers.every((function(e){return e.iceGatherer&&e.iceGatherer.state==="completed"}));if(n.iceGatheringState!=="gathering"){n.iceGatheringState="gathering";n._emitGatheringStateChange()}if(!s){n._dispatchEvent("icecandidate",a)}if(d){n._dispatchEvent("icecandidate",new Event("icecandidate"));n.iceGatheringState="complete";n._emitGatheringStateChange()}};e.setTimeout((function(){a.forEach((function(e){i.onlocalcandidate(e)}))}),0)};a.prototype._createIceAndDtlsTransports=function(){var t=this;var r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState();t._updateConnectionState()};var n=new e.RTCDtlsTransport(r);n.ondtlsstatechange=function(){t._updateConnectionState()};n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:true});t._updateConnectionState()};return{iceTransport:r,dtlsTransport:n}};a.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;if(t){delete t.onlocalcandidate;delete this.transceivers[e].iceGatherer}var r=this.transceivers[e].iceTransport;if(r){delete r.onicestatechange;delete this.transceivers[e].iceTransport}var n=this.transceivers[e].dtlsTransport;if(n){delete n.ondtlsstatechange;delete n.onerror;delete this.transceivers[e].dtlsTransport}};a.prototype._transceive=function(e,r,n){var i=lt(e.localCapabilities,e.remoteCapabilities);if(r&&e.rtpSender){i.encodings=e.sendEncodingParameters;i.rtcp={cname:ft.localCName,compound:e.rtcpParameters.compound};if(e.recvEncodingParameters.length){i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc}e.rtpSender.send(i)}if(n&&e.rtpReceiver&&i.codecs.length>0){if(e.kind==="video"&&e.recvEncodingParameters&&t<15019){e.recvEncodingParameters.forEach((function(e){delete e.rtx}))}if(e.recvEncodingParameters.length){i.encodings=e.recvEncodingParameters}else{i.encodings=[{}]}i.rtcp={compound:e.rtcpParameters.compound};if(e.rtcpParameters.cname){i.rtcp.cname=e.rtcpParameters.cname}if(e.sendEncodingParameters.length){i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc}e.rtpReceiver.receive(i)}};a.prototype.setLocalDescription=function(e){var t=this;if(["offer","answer"].indexOf(e.type)===-1){return Promise.reject(ht("TypeError",'Unsupported type "'+e.type+'"'))}if(!vt("setLocalDescription",e.type,t.signalingState)||t._isClosed){return Promise.reject(ht("InvalidStateError","Can not set local "+e.type+" in state "+t.signalingState))}var r;var n;if(e.type==="offer"){r=ft.splitSections(e.sdp);n=r.shift();r.forEach((function(e,r){var n=ft.parseRtpParameters(e);t.transceivers[r].localCapabilities=n}));t.transceivers.forEach((function(e,r){t._gather(e.mid,r)}))}else if(e.type==="answer"){r=ft.splitSections(t._remoteDescription.sdp);n=r.shift();var i=ft.matchPrefix(n,"a=ice-lite").length>0;r.forEach((function(e,r){var a=t.transceivers[r];var o=a.iceGatherer;var s=a.iceTransport;var c=a.dtlsTransport;var f=a.localCapabilities;var d=a.remoteCapabilities;var p=ft.isRejected(e)&&ft.matchPrefix(e,"a=bundle-only").length===0;if(!p&&!a.rejected){var u=ft.getIceParameters(e,n);var l=ft.getDtlsParameters(e,n);if(i){l.role="server"}if(!t.usingBundle||r===0){t._gather(a.mid,r);if(s.state==="new"){s.start(o,u,i?"controlling":"controlled")}if(c.state==="new"){c.start(l)}}var v=lt(f,d);t._transceive(a,v.codecs.length>0,false)}}))}t._localDescription={type:e.type,sdp:e.sdp};if(e.type==="offer"){t._updateSignalingState("have-local-offer")}else{t._updateSignalingState("stable")}return Promise.resolve()};a.prototype.setRemoteDescription=function(a){var o=this;if(["offer","answer"].indexOf(a.type)===-1){return Promise.reject(ht("TypeError",'Unsupported type "'+a.type+'"'))}if(!vt("setRemoteDescription",a.type,o.signalingState)||o._isClosed){return Promise.reject(ht("InvalidStateError","Can not set remote "+a.type+" in state "+o.signalingState))}var s={};o.remoteStreams.forEach((function(e){s[e.id]=e}));var c=[];var f=ft.splitSections(a.sdp);var d=f.shift();var p=ft.matchPrefix(d,"a=ice-lite").length>0;var u=ft.matchPrefix(d,"a=group:BUNDLE ").length>0;o.usingBundle=u;var l=ft.matchPrefix(d,"a=ice-options:")[0];if(l){o.canTrickleIceCandidates=l.substr(14).split(" ").indexOf("trickle")>=0}else{o.canTrickleIceCandidates=false}f.forEach((function(i,f){var l=ft.splitLines(i);var v=ft.getKind(i);var m=ft.isRejected(i)&&ft.matchPrefix(i,"a=bundle-only").length===0;var h=l[0].substr(2).split(" ")[2];var g=ft.getDirection(i,d);var y=ft.parseMsid(i);var C=ft.getMid(i)||ft.generateIdentifier();if(m||v==="application"&&(h==="DTLS/SCTP"||h==="UDP/DTLS/SCTP")){o.transceivers[f]={mid:C,kind:v,protocol:h,rejected:true};return}if(!m&&o.transceivers[f]&&o.transceivers[f].rejected){o.transceivers[f]=o._createTransceiver(v,true)}var T;var S;var R;var P;var $;var b;var E;var _;var w;var k=ft.parseRtpParameters(i);var x;var D;if(!m){x=ft.getIceParameters(i,d);D=ft.getDtlsParameters(i,d);D.role="client"}E=ft.parseRtpEncodingParameters(i);var I=ft.parseRtcpParameters(i);var M=ft.matchPrefix(i,"a=end-of-candidates",d).length>0;var O=ft.matchPrefix(i,"a=candidate:").map((function(e){return ft.parseCandidate(e)})).filter((function(e){return e.component===1}));if((a.type==="offer"||a.type==="answer")&&!m&&u&&f>0&&o.transceivers[f]){o._disposeIceAndDtlsTransports(f);o.transceivers[f].iceGatherer=o.transceivers[0].iceGatherer;o.transceivers[f].iceTransport=o.transceivers[0].iceTransport;o.transceivers[f].dtlsTransport=o.transceivers[0].dtlsTransport;if(o.transceivers[f].rtpSender){o.transceivers[f].rtpSender.setTransport(o.transceivers[0].dtlsTransport)}if(o.transceivers[f].rtpReceiver){o.transceivers[f].rtpReceiver.setTransport(o.transceivers[0].dtlsTransport)}}if(a.type==="offer"&&!m){T=o.transceivers[f]||o._createTransceiver(v);T.mid=C;if(!T.iceGatherer){T.iceGatherer=o._createIceGatherer(f,u)}if(O.length&&T.iceTransport.state==="new"){if(M&&(!u||f===0)){T.iceTransport.setRemoteCandidates(O)}else{O.forEach((function(e){mt(T.iceTransport,e)}))}}_=e.RTCRtpReceiver.getCapabilities(v);if(t<15019){_.codecs=_.codecs.filter((function(e){return e.name!=="rtx"}))}b=T.sendEncodingParameters||[{ssrc:(2*f+2)*1001}];var L=false;if(g==="sendrecv"||g==="sendonly"){L=!T.rtpReceiver;$=T.rtpReceiver||new e.RTCRtpReceiver(T.dtlsTransport,v);if(L){var j;w=$.track;if(y&&y.stream==="-");else if(y){if(!s[y.stream]){s[y.stream]=new e.MediaStream;Object.defineProperty(s[y.stream],"id",{get:function(){return y.stream}})}Object.defineProperty(w,"id",{get:function(){return y.track}});j=s[y.stream]}else{if(!s.default){s.default=new e.MediaStream}j=s.default}if(j){r(w,j);T.associatedRemoteMediaStreams.push(j)}c.push([w,$,j])}}else if(T.rtpReceiver&&T.rtpReceiver.track){T.associatedRemoteMediaStreams.forEach((function(e){var t=e.getTracks().find((function(e){return e.id===T.rtpReceiver.track.id}));if(t){n(t,e)}}));T.associatedRemoteMediaStreams=[]}T.localCapabilities=_;T.remoteCapabilities=k;T.rtpReceiver=$;T.rtcpParameters=I;T.sendEncodingParameters=b;T.recvEncodingParameters=E;o._transceive(o.transceivers[f],false,L)}else if(a.type==="answer"&&!m){T=o.transceivers[f];S=T.iceGatherer;R=T.iceTransport;P=T.dtlsTransport;$=T.rtpReceiver;b=T.sendEncodingParameters;_=T.localCapabilities;o.transceivers[f].recvEncodingParameters=E;o.transceivers[f].remoteCapabilities=k;o.transceivers[f].rtcpParameters=I;if(O.length&&R.state==="new"){if((p||M)&&(!u||f===0)){R.setRemoteCandidates(O)}else{O.forEach((function(e){mt(T.iceTransport,e)}))}}if(!u||f===0){if(R.state==="new"){R.start(S,x,"controlling")}if(P.state==="new"){P.start(D)}}var N=lt(T.localCapabilities,T.remoteCapabilities);var A=N.codecs.filter((function(e){return e.name.toLowerCase()==="rtx"})).length;if(!A&&T.sendEncodingParameters[0].rtx){delete T.sendEncodingParameters[0].rtx}o._transceive(T,g==="sendrecv"||g==="recvonly",g==="sendrecv"||g==="sendonly");if($&&(g==="sendrecv"||g==="sendonly")){w=$.track;if(y){if(!s[y.stream]){s[y.stream]=new e.MediaStream}r(w,s[y.stream]);c.push([w,$,s[y.stream]])}else{if(!s.default){s.default=new e.MediaStream}r(w,s.default);c.push([w,$,s.default])}}else{delete T.rtpReceiver}}}));if(o._dtlsRole===undefined){o._dtlsRole=a.type==="offer"?"active":"passive"}o._remoteDescription={type:a.type,sdp:a.sdp};if(a.type==="offer"){o._updateSignalingState("have-remote-offer")}else{o._updateSignalingState("stable")}Object.keys(s).forEach((function(t){var r=s[t];if(r.getTracks().length){if(o.remoteStreams.indexOf(r)===-1){o.remoteStreams.push(r);var n=new Event("addstream");n.stream=r;e.setTimeout((function(){o._dispatchEvent("addstream",n)}))}c.forEach((function(e){var t=e[0];var n=e[1];if(r.id!==e[2].id){return}i(o,t,n,[r])}))}}));c.forEach((function(e){if(e[2]){return}i(o,e[0],e[1],[])}));e.setTimeout((function(){if(!(o&&o.transceivers)){return}o.transceivers.forEach((function(e){if(e.iceTransport&&e.iceTransport.state==="new"&&e.iceTransport.getRemoteCandidates().length>0){console.warn("Timeout for addRemoteCandidate. Consider sending "+"an end-of-candidates notification");e.iceTransport.addRemoteCandidate({})}}))}),4e3);return Promise.resolve()};a.prototype.close=function(){this.transceivers.forEach((function(e){if(e.iceTransport){e.iceTransport.stop()}if(e.dtlsTransport){e.dtlsTransport.stop()}if(e.rtpSender){e.rtpSender.stop()}if(e.rtpReceiver){e.rtpReceiver.stop()}}));this._isClosed=true;this._updateSignalingState("closed")};a.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)};a.prototype._maybeFireNegotiationNeeded=function(){var t=this;if(this.signalingState!=="stable"||this.needNegotiation===true){return}this.needNegotiation=true;e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=false;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0)};a.prototype._updateIceConnectionState=function(){var e;var t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach((function(e){if(e.iceTransport&&!e.rejected){t[e.iceTransport.state]++}}));e="new";if(t.failed>0){e="failed"}else if(t.checking>0){e="checking"}else if(t.disconnected>0){e="disconnected"}else if(t.new>0){e="new"}else if(t.connected>0){e="connected"}else if(t.completed>0){e="completed"}if(e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}};a.prototype._updateConnectionState=function(){var e;var t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach((function(e){if(e.iceTransport&&e.dtlsTransport&&!e.rejected){t[e.iceTransport.state]++;t[e.dtlsTransport.state]++}}));t.connected+=t.completed;e="new";if(t.failed>0){e="failed"}else if(t.connecting>0){e="connecting"}else if(t.disconnected>0){e="disconnected"}else if(t.new>0){e="new"}else if(t.connected>0){e="connected"}if(e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}};a.prototype.createOffer=function(){var r=this;if(r._isClosed){return Promise.reject(ht("InvalidStateError","Can not call createOffer after close"))}var n=r.transceivers.filter((function(e){return e.kind==="audio"})).length;var i=r.transceivers.filter((function(e){return e.kind==="video"})).length;var a=arguments[0];if(a){if(a.mandatory||a.optional){throw new TypeError("Legacy mandatory/optional constraints not supported.")}if(a.offerToReceiveAudio!==undefined){if(a.offerToReceiveAudio===true){n=1}else if(a.offerToReceiveAudio===false){n=0}else{n=a.offerToReceiveAudio}}if(a.offerToReceiveVideo!==undefined){if(a.offerToReceiveVideo===true){i=1}else if(a.offerToReceiveVideo===false){i=0}else{i=a.offerToReceiveVideo}}}r.transceivers.forEach((function(e){if(e.kind==="audio"){n--;if(n<0){e.wantReceive=false}}else if(e.kind==="video"){i--;if(i<0){e.wantReceive=false}}}));while(n>0||i>0){if(n>0){r._createTransceiver("audio");n--}if(i>0){r._createTransceiver("video");i--}}var o=ft.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach((function(n,i){var a=n.track;var o=n.kind;var s=n.mid||ft.generateIdentifier();n.mid=s;if(!n.iceGatherer){n.iceGatherer=r._createIceGatherer(i,r.usingBundle)}var c=e.RTCRtpSender.getCapabilities(o);if(t<15019){c.codecs=c.codecs.filter((function(e){return e.name!=="rtx"}))}c.codecs.forEach((function(e){if(e.name==="H264"&&e.parameters["level-asymmetry-allowed"]===undefined){e.parameters["level-asymmetry-allowed"]="1"}if(n.remoteCapabilities&&n.remoteCapabilities.codecs){n.remoteCapabilities.codecs.forEach((function(t){if(e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate){e.preferredPayloadType=t.payloadType}}))}}));c.headerExtensions.forEach((function(e){var t=n.remoteCapabilities&&n.remoteCapabilities.headerExtensions||[];t.forEach((function(t){if(e.uri===t.uri){e.id=t.id}}))}));var f=n.sendEncodingParameters||[{ssrc:(2*i+1)*1001}];if(a){if(t>=15019&&o==="video"&&!f[0].rtx){f[0].rtx={ssrc:f[0].ssrc+1}}}if(n.wantReceive){n.rtpReceiver=new e.RTCRtpReceiver(n.dtlsTransport,o)}n.localCapabilities=c;n.sendEncodingParameters=f}));if(r._config.bundlePolicy!=="max-compat"){o+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"}o+="a=ice-options:trickle\r\n";r.transceivers.forEach((function(e,t){o+=pt(e,e.localCapabilities,"offer",e.stream,r._dtlsRole);o+="a=rtcp-rsize\r\n";if(e.iceGatherer&&r.iceGatheringState!=="new"&&(t===0||!r.usingBundle)){e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1;o+="a="+ft.writeCandidate(e)+"\r\n"}));if(e.iceGatherer.state==="completed"){o+="a=end-of-candidates\r\n"}}}));var s=new e.RTCSessionDescription({type:"offer",sdp:o});return Promise.resolve(s)};a.prototype.createAnswer=function(){var r=this;if(r._isClosed){return Promise.reject(ht("InvalidStateError","Can not call createAnswer after close"))}if(!(r.signalingState==="have-remote-offer"||r.signalingState==="have-local-pranswer")){return Promise.reject(ht("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState))}var n=ft.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);if(r.usingBundle){n+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"}n+="a=ice-options:trickle\r\n";var i=ft.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach((function(e,a){if(a+1>i){return}if(e.rejected){if(e.kind==="application"){if(e.protocol==="DTLS/SCTP"){n+="m=application 0 DTLS/SCTP 5000\r\n"}else{n+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n"}}else if(e.kind==="audio"){n+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\n"+"a=rtpmap:0 PCMU/8000\r\n"}else if(e.kind==="video"){n+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\n"+"a=rtpmap:120 VP8/90000\r\n"}n+="c=IN IP4 0.0.0.0\r\n"+"a=inactive\r\n"+"a=mid:"+e.mid+"\r\n";return}if(e.stream){var o;if(e.kind==="audio"){o=e.stream.getAudioTracks()[0]}else if(e.kind==="video"){o=e.stream.getVideoTracks()[0]}if(o){if(t>=15019&&e.kind==="video"&&!e.sendEncodingParameters[0].rtx){e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}}}}var s=lt(e.localCapabilities,e.remoteCapabilities);var c=s.codecs.filter((function(e){return e.name.toLowerCase()==="rtx"})).length;if(!c&&e.sendEncodingParameters[0].rtx){delete e.sendEncodingParameters[0].rtx}n+=pt(e,s,"answer",e.stream,r._dtlsRole);if(e.rtcpParameters&&e.rtcpParameters.reducedSize){n+="a=rtcp-rsize\r\n"}}));var a=new e.RTCSessionDescription({type:"answer",sdp:n});return Promise.resolve(a)};a.prototype.addIceCandidate=function(e){var t=this;var r;if(e&&!(e.sdpMLineIndex!==undefined||e.sdpMid)){return Promise.reject(new TypeError("sdpMLineIndex or sdpMid required"))}return new Promise((function(n,i){if(!t._remoteDescription){return i(ht("InvalidStateError","Can not add ICE candidate without a remote description"))}else if(!e||e.candidate===""){for(var a=0;a<t.transceivers.length;a++){if(t.transceivers[a].rejected){continue}t.transceivers[a].iceTransport.addRemoteCandidate({});r=ft.getMediaSections(t._remoteDescription.sdp);r[a]+="a=end-of-candidates\r\n";t._remoteDescription.sdp=ft.getDescription(t._remoteDescription.sdp)+r.join("");if(t.usingBundle){break}}}else{var o=e.sdpMLineIndex;if(e.sdpMid){for(var s=0;s<t.transceivers.length;s++){if(t.transceivers[s].mid===e.sdpMid){o=s;break}}}var c=t.transceivers[o];if(c){if(c.rejected){return n()}var f=Object.keys(e.candidate).length>0?ft.parseCandidate(e.candidate):{};if(f.protocol==="tcp"&&(f.port===0||f.port===9)){return n()}if(f.component&&f.component!==1){return n()}if(o===0||o>0&&c.iceTransport!==t.transceivers[0].iceTransport){if(!mt(c.iceTransport,f)){return i(ht("OperationError","Can not add ICE candidate"))}}var d=e.candidate.trim();if(d.indexOf("a=")===0){d=d.substr(2)}r=ft.getMediaSections(t._remoteDescription.sdp);r[o]+="a="+(f.type?d:"end-of-candidates")+"\r\n";t._remoteDescription.sdp=ft.getDescription(t._remoteDescription.sdp)+r.join("")}else{return i(ht("OperationError","Can not add ICE candidate"))}}n()}))};a.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;this.transceivers.forEach((function(e){if(e.rtpSender&&e.rtpSender.track===t){r=e.rtpSender}else if(e.rtpReceiver&&e.rtpReceiver.track===t){r=e.rtpReceiver}}));if(!r){throw ht("InvalidAccessError","Invalid selector.")}return r.getStats()}var n=[];this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){if(e[t]){n.push(e[t].getStats())}}))}));return Promise.all(n).then((function(e){var t=new Map;e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))}));return t}))};var o=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];o.forEach((function(t){var r=e[t];if(r&&r.prototype&&r.prototype.getStats){var n=r.prototype.getStats;r.prototype.getStats=function(){return n.apply(this).then((function(e){var t=new Map;Object.keys(e).forEach((function(r){e[r].type=dt(e[r]);t.set(r,e[r])}));return t}))}}}));var s=["createOffer","createAnswer"];s.forEach((function(e){var t=a.prototype[e];a.prototype[e]=function(){var e=arguments;if(typeof e[0]==="function"||typeof e[1]==="function"){return t.apply(this,[arguments[2]]).then((function(t){if(typeof e[0]==="function"){e[0].apply(null,[t])}}),(function(t){if(typeof e[1]==="function"){e[1].apply(null,[t])}}))}return t.apply(this,arguments)}}));s=["setLocalDescription","setRemoteDescription","addIceCandidate"];s.forEach((function(e){var t=a.prototype[e];a.prototype[e]=function(){var e=arguments;if(typeof e[1]==="function"||typeof e[2]==="function"){return t.apply(this,arguments).then((function(){if(typeof e[1]==="function"){e[1].apply(null)}}),(function(t){if(typeof e[2]==="function"){e[2].apply(null,[t])}}))}return t.apply(this,arguments)}}));["getStats"].forEach((function(e){var t=a.prototype[e];a.prototype[e]=function(){var e=arguments;if(typeof e[1]==="function"){return t.apply(this,arguments).then((function(){if(typeof e[1]==="function"){e[1].apply(null)}}))}return t.apply(this,arguments)}}));return a};function yt(e){var t=e&&e.navigator;var r=function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}};var n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch((function(e){return Promise.reject(r(e))}))}}function Ct(e){if(!("getDisplayMedia"in e.navigator)){return}if(!e.navigator.mediaDevices){return}if(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices){return}e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)}function Tt(e){var t=Be(e);if(e.RTCIceGatherer){if(!e.RTCIceCandidate){e.RTCIceCandidate=function e(t){return t}}if(!e.RTCSessionDescription){e.RTCSessionDescription=function e(t){return t}}if(t.version<15025){var r=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){r.set.call(this,e);var t=new Event("enabled");t.enabled=e;this.dispatchEvent(t)}})}}if(e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){if(this._dtmf===undefined){if(this.track.kind==="audio"){this._dtmf=new e.RTCDtmfSender(this)}else if(this.track.kind==="video"){this._dtmf=null}}return this._dtmf}})}if(e.RTCDtmfSender&&!e.RTCDTMFSender){e.RTCDTMFSender=e.RTCDtmfSender}var n=gt(e,t.version);e.RTCPeerConnection=function e(t){if(t&&t.iceServers){t.iceServers=st(t.iceServers);Ge("ICE servers after filtering:",t.iceServers)}return new n(t)};e.RTCPeerConnection.prototype=n.prototype}function St(e){if(e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)){e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack}}var Rt=Object.freeze({__proto__:null,shimPeerConnection:Tt,shimReplaceTrack:St,shimGetUserMedia:yt,shimGetDisplayMedia:Ct});function Pt(e){var t=Be(e);var r=e&&e.navigator;var n=e&&e.MediaStreamTrack;r.getUserMedia=function(e,t,n){ze("navigator.getUserMedia","navigator.mediaDevices.getUserMedia");r.mediaDevices.getUserMedia(e).then(t,n)};if(!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){var i=function(e,t,r){if(t in e&&!(r in e)){e[r]=e[t];delete e[t]}};var a=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){if(typeof e==="object"&&typeof e.audio==="object"){e=JSON.parse(JSON.stringify(e));i(e.audio,"autoGainControl","mozAutoGainControl");i(e.audio,"noiseSuppression","mozNoiseSuppression")}return a(e)};if(n&&n.prototype.getSettings){var o=n.prototype.getSettings;n.prototype.getSettings=function(){var e=o.apply(this,arguments);i(e,"mozAutoGainControl","autoGainControl");i(e,"mozNoiseSuppression","noiseSuppression");return e}}if(n&&n.prototype.applyConstraints){var s=n.prototype.applyConstraints;n.prototype.applyConstraints=function(e){if(this.kind==="audio"&&typeof e==="object"){e=JSON.parse(JSON.stringify(e));i(e,"autoGainControl","mozAutoGainControl");i(e,"noiseSuppression","mozNoiseSuppression")}return s.apply(this,[e])}}}}function $t(e,t){if(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices){return}if(!e.navigator.mediaDevices){return}e.navigator.mediaDevices.getDisplayMedia=function r(n){if(!(n&&n.video)){var i=new DOMException("getDisplayMedia without video "+"constraints is undefined");i.name="NotFoundError";i.code=8;return Promise.reject(i)}if(n.video===true){n.video={mediaSource:t}}else{n.video.mediaSource=t}return e.navigator.mediaDevices.getUserMedia(n)}}function bt(e){if(typeof e==="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)){Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}}function Et(e){var t=Be(e);if(typeof e!=="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection)){return}if(!e.RTCPeerConnection&&e.mozRTCPeerConnection){e.RTCPeerConnection=e.mozRTCPeerConnection}if(t.version<53){["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var r;var n=e.RTCPeerConnection.prototype[t];var i=(r={},r[t]=function(){arguments[0]=new(t==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]);return n.apply(this,arguments)},r);e.RTCPeerConnection.prototype[t]=i[t]}))}if(t.version<68){var r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function e(){if(!arguments[0]){if(arguments[1]){arguments[1].apply(null)}return Promise.resolve()}if(arguments[0]&&arguments[0].candidate===""){return Promise.resolve()}return r.apply(this,arguments)}}var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"};var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function e(){var r=arguments[0],a=arguments[1],o=arguments[2];return i.apply(this,[r||null]).then((function(e){if(t.version<53&&!a){try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(r){if(r.name!=="TypeError"){throw r}e.forEach((function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}}return e})).then(a,o)}}function _t(e){if(!(typeof e==="object"&&e.RTCPeerConnection&&e.RTCRtpSender)){return}if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype){return}var t=e.RTCPeerConnection.prototype.getSenders;if(t){e.RTCPeerConnection.prototype.getSenders=function e(){var r=this;var n=t.apply(this,[]);n.forEach((function(e){return e._pc=r}));return n}}var r=e.RTCPeerConnection.prototype.addTrack;if(r){e.RTCPeerConnection.prototype.addTrack=function e(){var t=r.apply(this,arguments);t._pc=this;return t}}e.RTCRtpSender.prototype.getStats=function e(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function wt(e){if(!(typeof e==="object"&&e.RTCPeerConnection&&e.RTCRtpSender)){return}if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype){return}var t=e.RTCPeerConnection.prototype.getReceivers;if(t){e.RTCPeerConnection.prototype.getReceivers=function e(){var r=this;var n=t.apply(this,[]);n.forEach((function(e){return e._pc=r}));return n}}Ae(e,"track",(function(e){e.receiver._pc=e.srcElement;return e}));e.RTCRtpReceiver.prototype.getStats=function e(){return this._pc.getStats(this.track)}}function kt(e){if(!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype){return}e.RTCPeerConnection.prototype.removeStream=function e(t){var r=this;ze("removeStream","removeTrack");this.getSenders().forEach((function(e){if(e.track&&t.getTracks().includes(e.track)){r.removeTrack(e)}}))}}function xt(e){if(e.DataChannel&&!e.RTCDataChannel){e.RTCDataChannel=e.DataChannel}}function Dt(e){if(!(typeof e==="object"&&e.RTCPeerConnection)){return}var t=e.RTCPeerConnection.prototype.addTransceiver;if(t){e.RTCPeerConnection.prototype.addTransceiver=function e(){this.setParametersPromises=[];var r=arguments[1];var n=r&&"sendEncodings"in r;if(n){r.sendEncodings.forEach((function(e){if("rid"in e){var t=/^[a-z0-9]{0,16}$/i;if(!t.test(e.rid)){throw new TypeError("Invalid RID value provided.")}}if("scaleResolutionDownBy"in e){if(!(parseFloat(e.scaleResolutionDownBy)>=1)){throw new RangeError("scale_resolution_down_by must be >= 1.0")}}if("maxFramerate"in e){if(!(parseFloat(e.maxFramerate)>=0)){throw new RangeError("max_framerate must be >= 0.0")}}}))}var i=t.apply(this,arguments);if(n){var a=i.sender;var o=a.getParameters();if(!("encodings"in o)){o.encodings=r.sendEncodings;this.setParametersPromises.push(a.setParameters(o).catch((function(){})))}}return i}}}function It(e){if(!(typeof e==="object"&&e.RTCPeerConnection)){return}var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function e(){var r=this;if(this.setParametersPromises&&this.setParametersPromises.length){return Promise.all(this.setParametersPromises).then((function(){return t.apply(r,arguments)})).finally((function(){r.setParametersPromises=[]}))}return t.apply(this,arguments)}}function Mt(e){if(!(typeof e==="object"&&e.RTCPeerConnection)){return}var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function e(){var r=this;if(this.setParametersPromises&&this.setParametersPromises.length){return Promise.all(this.setParametersPromises).then((function(){return t.apply(r,arguments)})).finally((function(){r.setParametersPromises=[]}))}return t.apply(this,arguments)}}var Ot=Object.freeze({__proto__:null,shimOnTrack:bt,shimPeerConnection:Et,shimSenderGetStats:_t,shimReceiverGetStats:wt,shimRemoveStream:kt,shimRTCDataChannel:xt,shimAddTransceiver:Dt,shimCreateOffer:It,shimCreateAnswer:Mt,shimGetUserMedia:Pt,shimGetDisplayMedia:$t});function Lt(e){if(typeof e!=="object"||!e.RTCPeerConnection){return}if(!("getLocalStreams"in e.RTCPeerConnection.prototype)){e.RTCPeerConnection.prototype.getLocalStreams=function e(){if(!this._localStreams){this._localStreams=[]}return this._localStreams}}if(!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function e(r){var n=this;if(!this._localStreams){this._localStreams=[]}if(!this._localStreams.includes(r)){this._localStreams.push(r)}r.getAudioTracks().forEach((function(e){return t.call(n,e,r)}));r.getVideoTracks().forEach((function(e){return t.call(n,e,r)}))};e.RTCPeerConnection.prototype.addTrack=function e(r){var n=arguments[1];if(n){if(!this._localStreams){this._localStreams=[n]}else if(!this._localStreams.includes(n)){this._localStreams.push(n)}}return t.apply(this,arguments)}}if(!("removeStream"in e.RTCPeerConnection.prototype)){e.RTCPeerConnection.prototype.removeStream=function e(t){var r=this;if(!this._localStreams){this._localStreams=[]}var n=this._localStreams.indexOf(t);if(n===-1){return}this._localStreams.splice(n,1);var i=t.getTracks();this.getSenders().forEach((function(e){if(i.includes(e.track)){r.removeTrack(e)}}))}}}function jt(e){if(typeof e!=="object"||!e.RTCPeerConnection){return}if(!("getRemoteStreams"in e.RTCPeerConnection.prototype)){e.RTCPeerConnection.prototype.getRemoteStreams=function e(){return this._remoteStreams?this._remoteStreams:[]}}if(!("onaddstream"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;if(this._onaddstream){this.removeEventListener("addstream",this._onaddstream);this.removeEventListener("track",this._onaddstreampoly)}this.addEventListener("addstream",this._onaddstream=e);this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(!t._remoteStreams){t._remoteStreams=[]}if(t._remoteStreams.includes(e)){return}t._remoteStreams.push(e);var r=new Event("addstream");r.stream=e;t.dispatchEvent(r)}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function e(){var r=this;if(!this._onaddstreampoly){this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(!r._remoteStreams){r._remoteStreams=[]}if(r._remoteStreams.indexOf(e)>=0){return}r._remoteStreams.push(e);var t=new Event("addstream");t.stream=e;r.dispatchEvent(t)}))})}return t.apply(r,arguments)}}}function Nt(e){if(typeof e!=="object"||!e.RTCPeerConnection){return}var t=e.RTCPeerConnection.prototype;var r=t.createOffer;var n=t.createAnswer;var i=t.setLocalDescription;var a=t.setRemoteDescription;var o=t.addIceCandidate;t.createOffer=function e(t,n){var i=arguments.length>=2?arguments[2]:arguments[0];var a=r.apply(this,[i]);if(!n){return a}a.then(t,n);return Promise.resolve()};t.createAnswer=function e(t,r){var i=arguments.length>=2?arguments[2]:arguments[0];var a=n.apply(this,[i]);if(!r){return a}a.then(t,r);return Promise.resolve()};var s=function(e,t,r){var n=i.apply(this,[e]);if(!r){return n}n.then(t,r);return Promise.resolve()};t.setLocalDescription=s;s=function(e,t,r){var n=a.apply(this,[e]);if(!r){return n}n.then(t,r);return Promise.resolve()};t.setRemoteDescription=s;s=function(e,t,r){var n=o.apply(this,[e]);if(!r){return n}n.then(t,r);return Promise.resolve()};t.addIceCandidate=s}function At(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var r=t.mediaDevices;var n=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=function(e){return n(Ut(e))}}if(!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia){t.getUserMedia=function e(r,n,i){t.mediaDevices.getUserMedia(r).then(n,i)}.bind(t)}}function Ut(e){if(e&&e.video!==undefined){return Object.assign({},e,{video:Je(e.video)})}return e}function Ft(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function e(r,n){if(r&&r.iceServers){var i=[];for(var a=0;a<r.iceServers.length;a++){var o=r.iceServers[a];if(!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")){ze("RTCIceServer.url","RTCIceServer.urls");o=JSON.parse(JSON.stringify(o));o.urls=o.url;delete o.url;i.push(o)}else{i.push(r.iceServers[a])}}r.iceServers=i}return new t(r,n)};e.RTCPeerConnection.prototype=t.prototype;if("generateCertificate"in e.RTCPeerConnection){Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function Gt(e){if(typeof e==="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)){Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}}function zt(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function e(r){if(r){if(typeof r.offerToReceiveAudio!=="undefined"){r.offerToReceiveAudio=!!r.offerToReceiveAudio}var n=this.getTransceivers().find((function(e){return e.receiver.track.kind==="audio"}));if(r.offerToReceiveAudio===false&&n){if(n.direction==="sendrecv"){if(n.setDirection){n.setDirection("sendonly")}else{n.direction="sendonly"}}else if(n.direction==="recvonly"){if(n.setDirection){n.setDirection("inactive")}else{n.direction="inactive"}}}else if(r.offerToReceiveAudio===true&&!n){this.addTransceiver("audio")}if(typeof r.offerToReceiveVideo!=="undefined"){r.offerToReceiveVideo=!!r.offerToReceiveVideo}var i=this.getTransceivers().find((function(e){return e.receiver.track.kind==="video"}));if(r.offerToReceiveVideo===false&&i){if(i.direction==="sendrecv"){if(i.setDirection){i.setDirection("sendonly")}else{i.direction="sendonly"}}else if(i.direction==="recvonly"){if(i.setDirection){i.setDirection("inactive")}else{i.direction="inactive"}}}else if(r.offerToReceiveVideo===true&&!i){this.addTransceiver("video")}}return t.apply(this,arguments)}}var Bt=Object.freeze({__proto__:null,shimLocalStreamsAPI:Lt,shimRemoteStreamsAPI:jt,shimCallbacksAPI:Nt,shimGetUserMedia:At,shimConstraints:Ut,shimRTCIceServerUrls:Ft,shimTrackEventTransceiver:Gt,shimCreateOfferLegacy:zt});function Vt(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype){return}var t=e.RTCIceCandidate;e.RTCIceCandidate=function e(r){if(typeof r==="object"&&r.candidate&&r.candidate.indexOf("a=")===0){r=JSON.parse(JSON.stringify(r));r.candidate=r.candidate.substr(2)}if(r.candidate&&r.candidate.length){var n=new t(r);var i=ft.parseCandidate(r.candidate);var a=Object.assign(n,i);a.toJSON=function e(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}};return a}return new t(r)};e.RTCIceCandidate.prototype=t.prototype;Ae(e,"icecandidate",(function(t){if(t.candidate){Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"})}return t}))}function Jt(e){if(!e.RTCPeerConnection){return}var t=Be(e);if(!("sctp"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return typeof this._sctp==="undefined"?null:this._sctp}})}var r=function(e){if(!e||!e.sdp){return false}var t=ft.splitSections(e.sdp);t.shift();return t.some((function(e){var t=ft.parseMLine(e);return t&&t.kind==="application"&&t.protocol.indexOf("SCTP")!==-1}))};var n=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(t===null||t.length<2){return-1}var r=parseInt(t[1],10);return r!==r?-1:r};var i=function(e){var r=65536;if(t.browser==="firefox"){if(t.version<57){if(e===-1){r=16384}else{r=2147483637}}else if(t.version<60){r=t.version===57?65535:65536}else{r=2147483637}}return r};var a=function(e,r){var n=65536;if(t.browser==="firefox"&&t.version===57){n=65535}var i=ft.matchPrefix(e.sdp,"a=max-message-size:");if(i.length>0){n=parseInt(i[0].substr(19),10)}else if(t.browser==="firefox"&&r!==-1){n=2147483637}return n};var o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function e(){this._sctp=null;if(t.browser==="chrome"&&t.version>=76){var s=this.getConfiguration().sdpSemantics;if(s==="plan-b"){Object.defineProperty(this,"sctp",{get:function(){return typeof this._sctp==="undefined"?null:this._sctp},enumerable:true,configurable:true})}}if(r(arguments[0])){var c=n(arguments[0]);var f=i(c);var d=a(arguments[0],c);var p;if(f===0&&d===0){p=Number.POSITIVE_INFINITY}else if(f===0||d===0){p=Math.max(f,d)}else{p=Math.min(f,d)}var u={};Object.defineProperty(u,"maxMessageSize",{get:function(){return p}});this._sctp=u}return o.apply(this,arguments)}}function Wt(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype)){return}function t(e,t){var r=e.send;e.send=function n(){var i=arguments[0];var a=i.length||i.size||i.byteLength;if(e.readyState==="open"&&t.sctp&&a>t.sctp.maxMessageSize){throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)")}return r.apply(e,arguments)}}var r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function e(){var n=r.apply(this,arguments);t(n,this);return n};Ae(e,"datachannel",(function(e){t(e.channel,e.target);return e}))}function Ht(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype){return}var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:true,configurable:true});Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){if(this._onconnectionstatechange){this.removeEventListener("connectionstatechange",this._onconnectionstatechange);delete this._onconnectionstatechange}if(e){this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)}},enumerable:true,configurable:true});["setLocalDescription","setRemoteDescription"].forEach((function(e){var r=t[e];t[e]=function(){if(!this._connectionstatechangepoly){this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var r=new Event("connectionstatechange",e);t.dispatchEvent(r)}return e};this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)}return r.apply(this,arguments)}}))}function qt(e){if(!e.RTCPeerConnection){return}var t=Be(e);if(t.browser==="chrome"&&t.version>=71){return}var r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function e(t){if(t&&t.sdp&&t.sdp.indexOf("\na=extmap-allow-mixed")!==-1){t.sdp=t.sdp.split("\n").filter((function(e){return e.trim()!=="a=extmap-allow-mixed"})).join("\n")}return r.apply(this,arguments)}}var Kt=Object.freeze({__proto__:null,shimRTCIceCandidate:Vt,shimMaxMessageSize:Jt,shimSendThrowTypeError:Wt,shimConnectionState:Ht,removeAllowExtmapMixed:qt});function Qt(e,t){var r=(e===void 0?{}:e).window;if(t===void 0){t={shimChrome:true,shimFirefox:true,shimEdge:true,shimSafari:true}}var n=Ge;var i=Be(r);var a={browserDetails:i,commonShim:Kt,extractVersion:Ne,disableLog:Ue,disableWarnings:Fe};switch(i.browser){case"chrome":if(!ot||!it||!t.shimChrome){n("Chrome shim is not included in this adapter release.");return a}n("adapter.js shimming chrome.");a.browserShim=ot;Ke(r);Xe(r);it(r);Ye(r);nt(r);Ze(r);et(r);tt(r);at(r);Vt(r);Ht(r);Jt(r);Wt(r);qt(r);break;case"firefox":if(!Ot||!Et||!t.shimFirefox){n("Firefox shim is not included in this adapter release.");return a}n("adapter.js shimming firefox.");a.browserShim=Ot;Pt(r);Et(r);bt(r);kt(r);_t(r);wt(r);xt(r);Dt(r);It(r);Mt(r);Vt(r);Ht(r);Jt(r);Wt(r);break;case"edge":if(!Rt||!Tt||!t.shimEdge){n("MS edge shim is not included in this adapter release.");return a}n("adapter.js shimming edge.");a.browserShim=Rt;yt(r);Ct(r);Tt(r);St(r);Jt(r);Wt(r);break;case"safari":if(!Bt||!t.shimSafari){n("Safari shim is not included in this adapter release.");return a}n("adapter.js shimming safari.");a.browserShim=Bt;Ft(r);zt(r);Nt(r);Lt(r);jt(r);Gt(r);At(r);Vt(r);Jt(r);Wt(r);qt(r);break;default:n("Unsupported browser!");break}return a}var Xt=Qt({window:window});(function(){var e=document.createElement("script");e.type="text/javascript";e.async=true;e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})()}}}));